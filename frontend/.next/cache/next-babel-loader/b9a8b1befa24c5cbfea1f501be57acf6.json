{"ast":null,"code":"import _regeneratorRuntime from \"/Users/munhagju/WebstormProjects/DoraemonPlate/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/munhagju/WebstormProjects/DoraemonPlate/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/munhagju/WebstormProjects/DoraemonPlate/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/munhagju/WebstormProjects/DoraemonPlate/frontend/pages/auth/register.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { TextField } from \"@material-ui/core\";\nimport { BACKEND_URL } from '../../config';\nimport { useCookies } from \"react-cookie\";\nimport { Title, ViewWrapper, LoginFormWrapper, NoAccount, CheckboxWrapper, FieldWrapper, SubmitBtn, ValidationAlert } from './styled';\n\nvar RegisterForm = function RegisterForm() {\n  _s();\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      email = _React$useState2[0],\n      setEmail = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      nickname = _React$useState4[0],\n      setNickname = _React$useState4[1];\n\n  var _React$useState5 = React.useState(\"\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      password = _React$useState6[0],\n      setPassword = _React$useState6[1];\n\n  var _React$useState7 = React.useState(\"\"),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      passwordConfirm = _React$useState8[0],\n      setPasswordConfirm = _React$useState8[1];\n\n  var _React$useState9 = React.useState(false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      agree = _React$useState10[0],\n      setAgree = _React$useState10[1];\n\n  var _useCookies = useCookies([\"accessToken\"]),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1]; // ValidationForm\n\n\n  var _useState = useState(\"\"),\n      valiEmail = _useState[0],\n      setValiEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      valiPwd = _useState2[0],\n      setValiPwd = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      valiPwdConfirm = _useState3[0],\n      setValiPwdConfirm = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      valiNickname = _useState4[0],\n      setValiNickname = _useState4[1];\n\n  var handleOnSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault(); // alert(\"TQ\");\n              // return;\n\n              if (validationEmail(email, true)) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", false);\n\n            case 3:\n              if (validationPasswd(password, true)) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", false);\n\n            case 5:\n              if (validationPasswdConfirm(passwordConfirm, true)) {\n                _context.next = 7;\n                break;\n              }\n\n              return _context.abrupt(\"return\", false);\n\n            case 7:\n              if (!nickname) {\n                alert(\"dd\");\n                setValiNickname(\"닉네임을 입력해주세요.\");\n              }\n\n              if (!(!email || !password || !passwordConfirm || !nickname)) {\n                _context.next = 11;\n                break;\n              }\n\n              alert(\"정보를 모두 입력해주세요\");\n              return _context.abrupt(\"return\");\n\n            case 11:\n              if (!(password !== passwordConfirm)) {\n                _context.next = 16;\n                break;\n              }\n\n              alert(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n              setPassword(\"\");\n              setPasswordConfirm(\"\");\n              return _context.abrupt(\"return\");\n\n            case 16:\n              _context.prev = 16;\n              _context.next = 19;\n              return axios.post(BACKEND_URL + \"/auth/register\", {\n                user_id: email,\n                password: password\n              })[\"catch\"](function (err) {\n                console.log(err);\n              });\n\n            case 19:\n              token = _context.sent;\n\n              if (!(token.status === 200)) {\n                _context.next = 29;\n                break;\n              }\n\n              setCookie(\"accessToken\", token.data.accessToken, {\n                path: \"/\",\n                maxAge: 100000\n              });\n              setCookie(\"refreshToken\", token.data.refreshToken, {\n                path: \"/\",\n                maxAge: 700000\n              });\n              console.log(cookies);\n              alert(token.data.message);\n              window.location.href = \"/\";\n              return _context.abrupt(\"return\");\n\n            case 29:\n              alert(token.data.message);\n              return _context.abrupt(\"return\");\n\n            case 31:\n              _context.next = 40;\n              break;\n\n            case 33:\n              _context.prev = 33;\n              _context.t0 = _context[\"catch\"](16);\n              alert(_context.t0);\n              setEmail(\"\");\n              setPassword(\"\");\n              setPasswordConfirm(\"\");\n              return _context.abrupt(\"return\");\n\n            case 40:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[16, 33]]);\n    }));\n\n    return function handleOnSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // 이메일 정규표현식 체크\n\n\n  var validationEmail = function validationEmail(email, submit) {\n    // var email = e.target.value;\n    setEmail(email);\n    var exptext = /^[A-Za-z0-9_\\.\\-]+@[A-Za-z0-9\\-]+\\.[A-Za-z0-9\\-]+/;\n\n    if (exptext.test(email) === false) {\n      if (email === \"\") {\n        //이메일 형식이 알파벳+숫자@알파벳+숫자.알파벳+숫자 형식이 아닐경우\n        if (submit) {\n          setValiEmail(\"이메일은 필수 입력 항목입니다.\");\n        }\n      } else {\n        if (submit) {\n          setValiEmail(\"이메일 형식이 올바르지 않습니다.\");\n        }\n      }\n\n      return false;\n    }\n\n    setValiEmail(\"\");\n    return true;\n  };\n\n  var validationPasswd = function validationPasswd(pw, submit) {\n    setPassword(pw);\n    var num = pw.search(/[0-9]/g);\n    var eng = pw.search(/[a-z]/gi);\n\n    if (pw.length < 8 || pw.length > 20) {\n      if (submit) {\n        setValiPwd(\"8자리 ~ 20자리 이내로 입력해주세요.\");\n      }\n\n      return false;\n    } else if (pw.search(/\\s/) !== -1) {\n      if (submit) {\n        setValiPwd(\"비밀번호는 공백 없이 입력해주세요.\");\n      }\n\n      return false;\n    } else if (num < 0 || eng < 0) {\n      if (submit) {\n        setValiPwd(\"영문,숫자를 혼합하여 입력해주세요.\");\n      }\n\n      return false;\n    } else {\n      setValiPwd(\"\");\n      return true;\n    }\n  };\n\n  var validationPasswdConfirm = function validationPasswdConfirm(pwConfirm, submit) {\n    setPasswordConfirm(pwConfirm);\n\n    if (password !== pwConfirm) {\n      if (submit) {\n        alert(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n      } else {\n        setValiPwdConfirm(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n      }\n\n      return false;\n    } else {\n      setValiPwdConfirm(\"\");\n      return true;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ViewWrapper, {\n    children: /*#__PURE__*/_jsxDEV(LoginFormWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uC774\\uBA54\\uC77C\",\n        type: \"text\",\n        val: email,\n        setVal: setEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(ValidationAlert, {\n        children: valiEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uB2C9\\uB124\\uC784\",\n        type: \"text\",\n        val: nickname,\n        setVal: setNickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(ValidationAlert, {\n        children: valiNickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n        type: \"password\",\n        val: password,\n        setVal: setPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, _this), valiPwd, /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",\n        type: \"password\",\n        val: passwordConfirm,\n        setVal: setPasswordConfirm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, _this), valiPwdConfirm, /*#__PURE__*/_jsxDEV(CheckboxWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"longsession\",\n          children: [\"\\uAC1C\\uC778\\uC815\\uBCF4 \\uCC98\\uB9AC\\uBC29\\uCE68 \\uB3D9\\uC758 (\\uD544\\uC218)\", /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"longsession\",\n            type: \"checkbox\",\n            onChange: function onChange() {\n              setAgree(!agree);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, _this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n          target: \"_blank\",\n          href: \"/agree\",\n          children: \"\\uB0B4\\uC6A9\\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"longsession\",\n          children: [\"\\uC11C\\uBE44\\uC2A4 \\uC774\\uC6A9\\uC57D\\uAD00 \\uB3D9\\uC758 (\\uD544\\uC218)\", /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"longsession\",\n            type: \"checkbox\",\n            onChange: function onChange() {\n              setAgree(!agree);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, _this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n          target: \"_blank\",\n          href: \"/agree\",\n          children: \"\\uB0B4\\uC6A9\\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(SubmitBtn, {\n        onClick: handleOnSubmit,\n        children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(NoAccount, {\n        children: [\"\\uC774\\uBBF8 \\uACC4\\uC815\\uC774 \\uC788\\uC73C\\uC2E0\\uAC00\\uC694? \", /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/auth/login\",\n          children: \"\\uB85C\\uADF8\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 25\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(RegisterForm, \"KNn422X18vRXd9+0uxLoSAJcpPg=\", false, function () {\n  return [useCookies];\n});\n\n_c = RegisterForm;\n\nvar LoginTextField = function LoginTextField(props) {\n  var label = props.label,\n      type = props.type,\n      val = props.val,\n      setVal = props.setVal;\n  return /*#__PURE__*/_jsxDEV(FieldWrapper, {\n    children: /*#__PURE__*/_jsxDEV(TextField, {\n      label: label,\n      fullWidth: true,\n      value: val,\n      type: type,\n      onChange: function onChange(e) {\n        setVal(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 5\n  }, _this);\n};\n\n_c2 = LoginTextField;\nexport default RegisterForm;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RegisterForm\");\n$RefreshReg$(_c2, \"LoginTextField\");","map":{"version":3,"sources":["/Users/munhagju/WebstormProjects/DoraemonPlate/frontend/pages/auth/register.tsx"],"names":["React","useState","Link","axios","TextField","BACKEND_URL","useCookies","Title","ViewWrapper","LoginFormWrapper","NoAccount","CheckboxWrapper","FieldWrapper","SubmitBtn","ValidationAlert","RegisterForm","email","setEmail","nickname","setNickname","password","setPassword","passwordConfirm","setPasswordConfirm","agree","setAgree","cookies","setCookie","valiEmail","setValiEmail","valiPwd","setValiPwd","valiPwdConfirm","setValiPwdConfirm","valiNickname","setValiNickname","handleOnSubmit","e","preventDefault","validationEmail","validationPasswd","validationPasswdConfirm","alert","post","user_id","err","console","log","token","status","data","accessToken","path","maxAge","refreshToken","message","window","location","href","submit","exptext","test","pw","num","search","eng","length","pwConfirm","LoginTextField","props","label","type","val","setVal","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { TextField } from \"@material-ui/core\";\nimport { BACKEND_URL } from '../../config';\nimport { useCookies } from \"react-cookie\";\nimport { Title,ViewWrapper,LoginFormWrapper,NoAccount,CheckboxWrapper,FieldWrapper,SubmitBtn,ValidationAlert } from './styled';\n \nconst RegisterForm = () => { \n  const [email, setEmail] = React.useState(\"\");\n  const [nickname, setNickname] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [passwordConfirm, setPasswordConfirm] = React.useState(\"\");\n  const [agree, setAgree] = React.useState(false);\n  const [cookies, setCookie] = useCookies([\"accessToken\"]);\n \n  // ValidationForm\n  const [valiEmail, setValiEmail] = useState(\"\");\n  const [valiPwd, setValiPwd] = useState(\"\");\n  const [valiPwdConfirm, setValiPwdConfirm] = useState(\"\");\n  const [valiNickname, setValiNickname] = useState(\"\");\n  \n\n  const handleOnSubmit = async (e:any) => {\n    e.preventDefault();\n    // alert(\"TQ\");\n    // return;\n\n    if(!validationEmail(email, true)){ \n      return false;\n    }\n\n    if (!validationPasswd(password, true)) {\n      return false;\n    }\n\n    if (!validationPasswdConfirm(passwordConfirm, true)) {\n      return false;\n    }\n\n    if (!nickname) {\n      alert(\"dd\");\n      setValiNickname(\"닉네임을 입력해주세요.\"); \n    }\n\n \n    if (!email || !password || !passwordConfirm || !nickname) {\n      alert(\"정보를 모두 입력해주세요\");\n      return;\n    }\n\n    if (password !== passwordConfirm) {\n      alert(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n      setPassword(\"\");\n      setPasswordConfirm(\"\");\n      return;\n    }\n\n\n    try {\n      const token:any = await axios \n        .post(BACKEND_URL + \"/auth/register\", { \n          user_id: email,\n          password,\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      \n      if (token.status === 200) {\n        setCookie(\"accessToken\", token.data.accessToken, {\n          path: \"/\",\n          maxAge: 100000,\n        });\n        setCookie(\"refreshToken\", token.data.refreshToken, {\n          path: \"/\",\n          maxAge: 700000,\n        }); \n        console.log(cookies); \n        alert(token.data.message); \n        window.location.href = \"/\"; \n        return;\n      } else {\n        alert(token.data.message);\n        return; \n      }\n    } catch (err) {\n      alert(err);\n      setEmail(\"\");\n      setPassword(\"\");\n      setPasswordConfirm(\"\");\n      return;\n    }\n  };\n\n\n  // 이메일 정규표현식 체크\n  const validationEmail = (email, submit) => {\n    // var email = e.target.value;\n    setEmail(email);\n    var exptext = /^[A-Za-z0-9_\\.\\-]+@[A-Za-z0-9\\-]+\\.[A-Za-z0-9\\-]+/;\n    if (exptext.test(email) === false) {\n      if (email === \"\") {\n        //이메일 형식이 알파벳+숫자@알파벳+숫자.알파벳+숫자 형식이 아닐경우\n        if (submit) {\n          setValiEmail(\"이메일은 필수 입력 항목입니다.\");\n        }\n      } else {\n        if (submit) {\n          setValiEmail(\"이메일 형식이 올바르지 않습니다.\");\n        }\n      } \n      return false;\n    }\n    setValiEmail(\"\");\n    return true;\n  };\n\n  const validationPasswd = (pw, submit) => {\n    setPassword(pw);\n    var num = pw.search(/[0-9]/g);\n    var eng = pw.search(/[a-z]/gi);\n\n    if (pw.length < 8 || pw.length > 20) {\n      if (submit) {\n        setValiPwd(\"8자리 ~ 20자리 이내로 입력해주세요.\");\n      } \n      return false;\n    } else if (pw.search(/\\s/) !== -1) {\n      if (submit) {\n        setValiPwd(\"비밀번호는 공백 없이 입력해주세요.\");\n      } \n      return false;\n    } else if (num < 0 || eng < 0) {\n      if (submit) {\n        setValiPwd(\"영문,숫자를 혼합하여 입력해주세요.\");\n      }\n      return false;\n    } else {\n      setValiPwd(\"\");\n      return true; \n    }\n  };\n\n  const validationPasswdConfirm = (pwConfirm, submit) => {\n    setPasswordConfirm(pwConfirm);\n    if (password !== pwConfirm) {\n      if (submit) {\n        alert(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n      } else {\n        setValiPwdConfirm(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n      }\n      return false;\n    } else {\n      setValiPwdConfirm(\"\");\n      return true;\n    }\n  };\n\n  return (\n    <ViewWrapper>\n      <LoginFormWrapper>\n        <Title>Sign up</Title>\n        <LoginTextField\n          label=\"이메일\"\n          type=\"text\"\n          val={email}\n          setVal={setEmail}\n        />\n        <ValidationAlert>{valiEmail}</ValidationAlert>\n        <LoginTextField\n          label=\"닉네임\"\n          type=\"text\"\n          val={nickname}\n          setVal={setNickname}\n        />\n        <ValidationAlert>{valiNickname}</ValidationAlert>\n\n        <LoginTextField\n          label=\"비밀번호\"\n          type=\"password\"\n          val={password}\n          setVal={setPassword}\n        />\n        { valiPwd}\n        <LoginTextField\n          label=\"비밀번호 확인\"\n          type=\"password\"\n          val={passwordConfirm}\n          setVal={setPasswordConfirm}\n        />\n        { valiPwdConfirm}\n        <CheckboxWrapper>\n          <label htmlFor=\"longsession\">\n            개인정보 처리방침 동의 (필수)\n            <input\n              id=\"longsession\"\n              type=\"checkbox\"\n              onChange={() => {\n                setAgree(!agree);\n              }}\n            />\n          </label>\n          &nbsp;&nbsp;\n          <a target=\"_blank\" href=\"/agree\">\n            내용보기\n          </a>\n          <br />\n          <br />\n          <label htmlFor=\"longsession\">\n            서비스 이용약관 동의 (필수)\n            <input\n              id=\"longsession\"\n              type=\"checkbox\"\n              onChange={() => {\n                setAgree(!agree);\n              }}\n            />\n          </label>\n          &nbsp;&nbsp;\n          <a target=\"_blank\" href=\"/agree\">\n            내용보기\n          </a>\n        </CheckboxWrapper>\n        \n        <SubmitBtn onClick={handleOnSubmit}>회원가입</SubmitBtn>\n        <NoAccount>\n          이미 계정이 있으신가요? <Link href=\"/auth/login\">로그인</Link>\n        </NoAccount>\n      </LoginFormWrapper>\n    </ViewWrapper>\n  );\n};\n\n\n\nconst LoginTextField = (props) => {\n  const { label, type, val, setVal } = props;\n  return (\n    <FieldWrapper>\n      <TextField\n        label={label}\n        fullWidth\n        value={val}\n        type={type}\n        onChange={(e) => {\n          setVal(e.target.value);\n        }}\n      />\n    </FieldWrapper>\n  );\n};\n\n\nexport default RegisterForm;\n"]},"metadata":{},"sourceType":"module"}