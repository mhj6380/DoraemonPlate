{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/munhagju/DoraemonPlateV1/frontend/components/form/QuillEditorField.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport styled from 'styled-components';\nimport dynamic from 'next/dynamic';\nimport axios from 'axios';\nimport 'react-quill/dist/quill.snow.css'; // import Quill from 'quill';\n// import ImageUploader from 'quill-image-uploader';\n// const Quill: any = dynamic(() => import('quill'));\n// const Quill: any = dynamic(() => import('quill'), { ssr: false });\n\nvar ReactQuill = dynamic(_c = function _c() {\n  return import('react-quill');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react-quill')];\n    },\n    modules: ['react-quill']\n  }\n}); // Quill.register('modules/imageUpload', ImageUploader);\n// const Quill: any = dynamic(() => import('quill'), {\n//   ssr: false,\n// });\n// const QuillClipboard = ReactQuill.import('mudules/clipboard');\n// const QuillClipboard = Quill.import('modules/clipboard');\n// Quill.register('modules/imageUpload', ImageUploader);\n\n_c2 = ReactQuill;\nvar QuillEditorFieldWrapper = styled.div.withConfig({\n  displayName: \"QuillEditorField__QuillEditorFieldWrapper\",\n  componentId: \"kd8r5m-0\"\n})([\"width:100%;min-height:240px;display:flex;flex-flow:row wrap;background:#fff;.rdw-editor-main{img{width:100% !important;height:auto;}}\"]);\n_c3 = QuillEditorFieldWrapper;\nvar PaddingWrapper = styled.div.withConfig({\n  displayName: \"QuillEditorField__PaddingWrapper\",\n  componentId: \"kd8r5m-1\"\n})([\"width:100%;padding:15px;\"]);\n_c4 = PaddingWrapper;\n\nvar QuillEditorField = function QuillEditorField(_ref) {\n  _s();\n\n  var val = _ref.val,\n      setVal = _ref.setVal,\n      editMode = _ref.editMode,\n      currentVal = _ref.currentVal;\n  var Quill = true ? require('quill') : function () {\n    return false;\n  };\n  var quillElement = useRef(null);\n  var quillInstance = useRef(null);\n\n  var onClickImageBtn = function onClickImageBtn() {\n    var input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', 'image/*');\n    input.click();\n\n    input.onchange = function () {\n      var file = input.files[0];\n      var fileName = file.name;\n      var config = {\n        bucketName: process.env.S3_BUCKET_NAME,\n        region: process.env.S3_REGION,\n        accessKeyId: process.env.S3_ACCESS_ID,\n        secretAccessKey: process.env.S3_ACCESS_KEY\n      };\n      var ReactS3Client = new S3(config);\n      ReactS3Client.uploadFile(file, fileName).then(function (data) {\n        if (data.status === 204) {\n          //커서 위치 받아오기 위함.\n          var range = quillInstance.current.getSelection(true); // 1.현재 커서 위치에 2. 이미지를 3.src=\"\" 로 나타냄.\n\n          quillInstance.current.insertEmbed(range.index, 'image', \"\".concat(data.location)); // 이미지 업로드 후 커서 이미지 한칸 옆으로 이동.\n\n          quillInstance.current.setSelection(range.index + 1);\n        } else {\n          alert('error');\n        }\n      });\n    };\n  };\n\n  var onChangeEditor = function onChangeEditor(value) {\n    setVal(value); // console.log(setVal);\n  };\n\n  var uploadCallback = function uploadCallback(file) {\n    console.log('FILE', file);\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        console.log(reader.result);\n        axios.post('https://wizmedia.me:8080/api/playmango/upload', {\n          blur: false,\n          image: [reader.result]\n        }).then(function (res) {\n          console.log(res.data[0].fileName);\n          resolve({\n            data: {\n              link: res.data[0].fileName\n            }\n          });\n        })[\"catch\"](function (err) {\n          reject(err);\n        });\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  var toolbarOptions = [['bold', 'italic', 'underline', 'strike'], // toggled buttons\n  ['blockquote', 'code-block'], [{\n    header: 1\n  }, {\n    header: 2\n  }], // custom button values\n  [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }], [{\n    script: 'sub'\n  }, {\n    script: 'super'\n  }], // superscript/subscript\n  [{\n    indent: '-1'\n  }, {\n    indent: '+1'\n  }], // outdent/indent\n  [{\n    direction: 'rtl'\n  }], // text direction\n  [{\n    size: ['small', false, 'large', 'huge']\n  }], // custom dropdown\n  [{\n    header: [1, 2, 3, 4, 5, 6, false]\n  }], [{\n    color: ['red']\n  }, {\n    background: []\n  }], // dropdown with defaults from theme\n  [{\n    font: []\n  }], [{\n    align: []\n  }], ['clean'] // remove formatting button\n  ];\n\n  function insertHeart() {\n    var cursorPosition = this.quill.getSelection().index;\n    this.quill.insertText(cursorPosition, '♥');\n    this.quill.setSelection(cursorPosition + 1);\n  } // const modules = {\n  //   toolbar: {\n  //     container: '#toolbar',\n  //     handlers: {\n  //       insertHeart: insertHeart,\n  //     },\n  //   },\n  // };\n\n\n  var undoChange = function undoChange() {\n    console.log('t');\n  };\n\n  var redoChange = function redoChange() {\n    console.log('t');\n  };\n\n  var modules = {\n    toolbar: {\n      container: '#toolbar',\n      handlers: {\n        insertHeart: insertHeart\n      }\n    }\n  };\n  var formats = ['header', 'font', 'size', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'indent', 'link', 'image', 'color'];\n  return /*#__PURE__*/_jsxDEV(QuillEditorFieldWrapper, {\n    children: /*#__PURE__*/_jsxDEV(PaddingWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(CustomToolbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n        placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694 :)\",\n        theme: \"snow\",\n        value: val,\n        onChange: onChangeEditor,\n        modules: modules,\n        formats: formats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(QuillEditorField, \"tYpJOHAwb987rprWDscnDQ48IXQ=\");\n\n_c5 = QuillEditorField;\n\nvar CustomToolbar = function CustomToolbar() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"toolbar\",\n    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"ql-font\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"arial\",\n        selected: true,\n        children: \"Arial\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"comic-sans\",\n        children: \"Comic Sans\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"courier-new\",\n        children: \"Courier New\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"georgia\",\n        children: \"Georgia\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"helvetica\",\n        children: \"Helvetica\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"lucida\",\n        children: \"Lucida\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"ql-size\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"extra-small\",\n        children: \"Size 1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"small\",\n        children: \"Size 2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"medium\",\n        selected: true,\n        children: \"Size 3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"large\",\n        children: \"Size 4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"ql-align\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"ql-color\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"ql-background\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"ql-clean\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"ql-insertHeart\",\n      children: \"\\uD558\\uD2B8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 3\n  }, _this);\n};\n\n_c6 = CustomToolbar;\nexport default QuillEditorField;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"ReactQuill$dynamic\");\n$RefreshReg$(_c2, \"ReactQuill\");\n$RefreshReg$(_c3, \"QuillEditorFieldWrapper\");\n$RefreshReg$(_c4, \"PaddingWrapper\");\n$RefreshReg$(_c5, \"QuillEditorField\");\n$RefreshReg$(_c6, \"CustomToolbar\");","map":{"version":3,"sources":["/Users/munhagju/DoraemonPlateV1/frontend/components/form/QuillEditorField.tsx"],"names":["React","useRef","styled","dynamic","axios","ReactQuill","ssr","QuillEditorFieldWrapper","div","PaddingWrapper","QuillEditorField","val","setVal","editMode","currentVal","Quill","require","quillElement","quillInstance","onClickImageBtn","input","document","createElement","setAttribute","click","onchange","file","files","fileName","name","config","bucketName","process","env","S3_BUCKET_NAME","region","S3_REGION","accessKeyId","S3_ACCESS_ID","secretAccessKey","S3_ACCESS_KEY","ReactS3Client","S3","uploadFile","then","data","status","range","current","getSelection","insertEmbed","index","location","setSelection","alert","onChangeEditor","value","uploadCallback","console","log","Promise","resolve","reject","reader","FileReader","onloadend","result","post","blur","image","res","link","err","readAsDataURL","toolbarOptions","header","list","script","indent","direction","size","color","background","font","align","insertHeart","cursorPosition","quill","insertText","undoChange","redoChange","modules","toolbar","container","handlers","formats","CustomToolbar"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport styled from 'styled-components';\nimport dynamic from 'next/dynamic';\nimport axios from 'axios';\nimport 'react-quill/dist/quill.snow.css';\n\n// import Quill from 'quill';\n// import ImageUploader from 'quill-image-uploader';\n\n// const Quill: any = dynamic(() => import('quill'));\n\n// const Quill: any = dynamic(() => import('quill'), { ssr: false });\nconst ReactQuill: any = dynamic(() => import('react-quill'), {\n  ssr: false,\n});\n\n// Quill.register('modules/imageUpload', ImageUploader);\n\n// const Quill: any = dynamic(() => import('quill'), {\n//   ssr: false,\n// });\n// const QuillClipboard = ReactQuill.import('mudules/clipboard');\n// const QuillClipboard = Quill.import('modules/clipboard');\n\n// Quill.register('modules/imageUpload', ImageUploader);\n\nconst QuillEditorFieldWrapper = styled.div`\n  width: 100%;\n  min-height: 240px;\n  display: flex;\n  flex-flow: row wrap;\n  background: #fff;\n  .rdw-editor-main {\n    //에디터 내에 이미지 커스텀 사이징\n    img {\n      width: 100% !important;\n      height: auto;\n    }\n  }\n`;\n\nconst PaddingWrapper = styled.div`\n  width: 100%;\n  padding: 15px;\n`;\n\ninterface Props {\n  val: any;\n  setVal: any;\n  editMode?: boolean;\n  currentVal?: string;\n}\n\nconst QuillEditorField = ({\n  val,\n  setVal,\n  editMode,\n  currentVal,\n}: Props): JSX.Element => {\n  const Quill = typeof window == 'object' ? require('quill') : () => false;\n\n  const quillElement = useRef(null);\n  const quillInstance = useRef(null);\n\n  const onClickImageBtn = () => {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', 'image/*');\n    input.click();\n    input.onchange = function () {\n      const file = input.files[0];\n      const fileName = file.name;\n\n      const config = {\n        bucketName: process.env.S3_BUCKET_NAME,\n        region: process.env.S3_REGION,\n        accessKeyId: process.env.S3_ACCESS_ID,\n        secretAccessKey: process.env.S3_ACCESS_KEY,\n      };\n\n      const ReactS3Client = new S3(config);\n\n      ReactS3Client.uploadFile(file, fileName).then((data) => {\n        if (data.status === 204) {\n          //커서 위치 받아오기 위함.\n          const range = quillInstance.current.getSelection(true);\n          // 1.현재 커서 위치에 2. 이미지를 3.src=\"\" 로 나타냄.\n          quillInstance.current.insertEmbed(\n            range.index,\n            'image',\n            `${data.location}`\n          );\n\n          // 이미지 업로드 후 커서 이미지 한칸 옆으로 이동.\n          quillInstance.current.setSelection(range.index + 1);\n        } else {\n          alert('error');\n        }\n      });\n    };\n  };\n\n  const onChangeEditor = (value: string) => {\n    setVal(value);\n    // console.log(setVal);\n  };\n\n  const uploadCallback = (file) => {\n    console.log('FILE', file);\n\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        console.log(reader.result);\n        axios\n          .post('https://wizmedia.me:8080/api/playmango/upload', {\n            blur: false,\n            image: [reader.result],\n          })\n          .then((res: any) => {\n            console.log(res.data[0].fileName);\n            resolve({ data: { link: res.data[0].fileName } });\n          })\n          .catch((err: any) => {\n            reject(err);\n          });\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  var toolbarOptions = [\n    ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n    ['blockquote', 'code-block'],\n\n    [{ header: 1 }, { header: 2 }], // custom button values\n    [{ list: 'ordered' }, { list: 'bullet' }],\n    [{ script: 'sub' }, { script: 'super' }], // superscript/subscript\n    [{ indent: '-1' }, { indent: '+1' }], // outdent/indent\n    [{ direction: 'rtl' }], // text direction\n\n    [{ size: ['small', false, 'large', 'huge'] }], // custom dropdown\n    [{ header: [1, 2, 3, 4, 5, 6, false] }],\n\n    [{ color: ['red'] }, { background: [] }], // dropdown with defaults from theme\n    [{ font: [] }],\n    [{ align: [] }],\n\n    ['clean'], // remove formatting button\n  ];\n\n  function insertHeart() {\n    const cursorPosition = this.quill.getSelection().index;\n    this.quill.insertText(cursorPosition, '♥');\n    this.quill.setSelection(cursorPosition + 1);\n  }\n\n  // const modules = {\n  //   toolbar: {\n  //     container: '#toolbar',\n  //     handlers: {\n  //       insertHeart: insertHeart,\n  //     },\n  //   },\n  // };\n\n  const undoChange = () => {\n    console.log('t');\n  };\n  const redoChange = () => {\n    console.log('t');\n  };\n\n  const modules = {\n    toolbar: {\n      container: '#toolbar',\n      handlers: {\n        insertHeart: insertHeart,\n      },\n    },\n  };\n\n  const formats = [\n    'header',\n    'font',\n    'size',\n    'bold',\n    'italic',\n    'underline',\n    'strike',\n    'blockquote',\n    'list',\n    'bullet',\n    'indent',\n    'link',\n    'image',\n    'color',\n  ];\n\n  return (\n    <QuillEditorFieldWrapper>\n      <PaddingWrapper>\n        <CustomToolbar />\n        <ReactQuill\n          placeholder=\"내용을 입력해주세요 :)\"\n          theme=\"snow\"\n          value={val}\n          onChange={onChangeEditor}\n          modules={modules}\n          formats={formats}\n        />\n      </PaddingWrapper>\n    </QuillEditorFieldWrapper>\n  );\n};\n\nconst CustomToolbar = () => (\n  <div id=\"toolbar\">\n    <select className=\"ql-font\">\n      <option value=\"arial\" selected>\n        Arial\n      </option>\n      <option value=\"comic-sans\">Comic Sans</option>\n      <option value=\"courier-new\">Courier New</option>\n      <option value=\"georgia\">Georgia</option>\n      <option value=\"helvetica\">Helvetica</option>\n      <option value=\"lucida\">Lucida</option>\n    </select>\n    <select className=\"ql-size\">\n      <option value=\"extra-small\">Size 1</option>\n      <option value=\"small\">Size 2</option>\n      <option value=\"medium\" selected>\n        Size 3\n      </option>\n      <option value=\"large\">Size 4</option>\n    </select>\n    <select className=\"ql-align\" />\n    <select className=\"ql-color\" />\n    <select className=\"ql-background\" />\n    <button className=\"ql-clean\" />\n    <button className=\"ql-insertHeart\">{/* <CustomHeart /> */}하트</button>\n  </div>\n);\n\nexport default QuillEditorField;\n"]},"metadata":{},"sourceType":"module"}