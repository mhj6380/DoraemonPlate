{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/munhagju/DoraemonPlateV1/frontend/components/form/QuillEditorField.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport dynamic from 'next/dynamic';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { EditorState, convertFromHTML, ContentState } from 'draft-js';\nimport axios from 'axios'; // import ReactQuill from 'react-quill'; // Typescript\n\nimport 'react-quill/dist/quill.snow.css';\nvar ReactQuill = dynamic(_c = function _c() {\n  return import('react-quill');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react-quill')];\n    },\n    modules: ['react-quill']\n  }\n});\n_c2 = ReactQuill;\nvar QuillEditorFieldWrapper = styled.div.withConfig({\n  displayName: \"QuillEditorField__QuillEditorFieldWrapper\",\n  componentId: \"kd8r5m-0\"\n})([\"width:100%;min-height:240px;display:flex;flex-flow:row wrap;background:#fff;.rdw-editor-main{img{width:100% !important;height:auto;}}\"]);\n_c3 = QuillEditorFieldWrapper;\nvar PaddingWrapper = styled.div.withConfig({\n  displayName: \"QuillEditorField__PaddingWrapper\",\n  componentId: \"kd8r5m-1\"\n})([\"width:100%;padding:15px;\"]);\n_c4 = PaddingWrapper;\n\nvar QuillEditorField = function QuillEditorField(_ref) {\n  _s();\n\n  var val = _ref.val,\n      setVal = _ref.setVal,\n      editMode = _ref.editMode,\n      currentVal = _ref.currentVal;\n  React.useEffect(function () {\n    if (!editMode) return;\n    var blocksFromHTML = convertFromHTML(currentVal);\n    var state = ContentState.createFromBlockArray(blocksFromHTML.contentBlocks, blocksFromHTML.entityMap);\n    setVal(EditorState.createWithContent(state));\n  }, []);\n\n  var onEditorStateChange = function onEditorStateChange(editorState) {\n    // editorState에 값 설정\n    setVal(editorState);\n  };\n\n  var uploadCallback = function uploadCallback(file) {\n    console.log('FILE', file);\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        console.log(reader.result);\n        axios.post('https://wizmedia.me:8080/api/playmango/upload', {\n          blur: false,\n          image: [reader.result]\n        }).then(function (res) {\n          console.log(res.data[0].fileName);\n          resolve({\n            data: {\n              link: res.data[0].fileName\n            }\n          });\n        })[\"catch\"](function (err) {\n          reject(err);\n        });\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(QuillEditorFieldWrapper, {\n    children: /*#__PURE__*/_jsxDEV(PaddingWrapper, {\n      children: /*#__PURE__*/_jsxDEV(ReactQuill, {\n        theme: \"snow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(QuillEditorField, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c5 = QuillEditorField;\nexport default QuillEditorField;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"ReactQuill$dynamic\");\n$RefreshReg$(_c2, \"ReactQuill\");\n$RefreshReg$(_c3, \"QuillEditorFieldWrapper\");\n$RefreshReg$(_c4, \"PaddingWrapper\");\n$RefreshReg$(_c5, \"QuillEditorField\");","map":{"version":3,"sources":["/Users/munhagju/DoraemonPlateV1/frontend/components/form/QuillEditorField.tsx"],"names":["React","styled","dynamic","EditorState","convertFromHTML","ContentState","axios","ReactQuill","ssr","QuillEditorFieldWrapper","div","PaddingWrapper","QuillEditorField","val","setVal","editMode","currentVal","useEffect","blocksFromHTML","state","createFromBlockArray","contentBlocks","entityMap","createWithContent","onEditorStateChange","editorState","uploadCallback","file","console","log","Promise","resolve","reject","reader","FileReader","onloadend","result","post","blur","image","then","res","data","fileName","link","err","readAsDataURL"],"mappings":"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","sourcesContent":["import React, { Dispatch, SetStateAction } from 'react';\nimport styled from 'styled-components';\nimport dynamic from 'next/dynamic';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { EditorState, convertFromHTML, ContentState } from 'draft-js';\nimport axios from 'axios';\n\n// import ReactQuill from 'react-quill'; // Typescript\nimport 'react-quill/dist/quill.snow.css';\n\nconst ReactQuill: any = dynamic(() => import('react-quill'), {\n  ssr: false,\n});\n\nconst QuillEditorFieldWrapper = styled.div`\n  width: 100%;\n  min-height: 240px;\n  display: flex;\n  flex-flow: row wrap;\n  background: #fff;\n  .rdw-editor-main {\n    //에디터 내에 이미지 커스텀 사이징\n    img {\n      width: 100% !important;\n      height: auto;\n    }\n  }\n`;\n\nconst PaddingWrapper = styled.div`\n  width: 100%;\n  padding: 15px;\n`;\n\ninterface Props {\n  val: EditorState;\n  setVal: Dispatch<SetStateAction<EditorState>>;\n  editMode?: boolean;\n  currentVal?: string;\n}\n\nconst QuillEditorField = ({\n  val,\n  setVal,\n  editMode,\n  currentVal,\n}: Props): JSX.Element => {\n  React.useEffect(() => {\n    if (!editMode) return;\n\n    const blocksFromHTML = convertFromHTML(currentVal);\n\n    const state = ContentState.createFromBlockArray(\n      blocksFromHTML.contentBlocks,\n      blocksFromHTML.entityMap\n    );\n\n    setVal(EditorState.createWithContent(state));\n  }, []);\n\n  const onEditorStateChange = (editorState: any) => {\n    // editorState에 값 설정\n    setVal(editorState);\n  };\n\n  const uploadCallback = (file) => {\n    console.log('FILE', file);\n\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        console.log(reader.result);\n        axios\n          .post('https://wizmedia.me:8080/api/playmango/upload', {\n            blur: false,\n            image: [reader.result],\n          })\n          .then((res: any) => {\n            console.log(res.data[0].fileName);\n            resolve({ data: { link: res.data[0].fileName } });\n          })\n          .catch((err: any) => {\n            reject(err);\n          });\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  return (\n    <QuillEditorFieldWrapper>\n      <PaddingWrapper>\n        <ReactQuill theme=\"snow\" />\n      </PaddingWrapper>\n    </QuillEditorFieldWrapper>\n  );\n};\n\nexport default QuillEditorField;\n"]},"metadata":{},"sourceType":"module"}