{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/munhagju/DoraemonPlateV1/frontend/pages/chat/index.tsx\";\nimport React, { useState, useEffect } from \"react\"; // import AppLayout from \"../../components/layout/AppLayout\";\n\nimport TransitionLayout from \"../../components/layout/TransitionLayout\";\nimport BasicPageTitle from '../../components/layout/pagetitle/BasicPageTitle';\nimport { io } from 'socket.io-client';\nconst socket = io('http://localhost:8080');\n\nconst ChatPage = () => {\n  const {\n    0: name,\n    1: setName\n  } = useState('');\n  const {\n    0: text,\n    1: setText\n  } = useState('');\n  const {\n    0: messages,\n    1: setMessages\n  } = useState([]);\n  useEffect(() => {\n    function receivedMessage(message) {\n      const newMessage = {\n        id: \"test\",\n        name: message.name,\n        text: message.text\n      };\n      setMessages([...messages, newMessage]);\n    }\n\n    socket.on('message', message => {\n      receivedMessage(message);\n    });\n  }, [messages, name, text]);\n\n  function sendMessage() {\n    const message = {\n      name,\n      text\n    };\n    socket.emit('message', message);\n    setText('');\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(BasicPageTitle, {\n      title: \"\\uCC44\\uD305\",\n      description: \"\\uCC44\\uD305 \\uD398\\uC774\\uC9C0 \\uC791\\uC5C5\\uC608\\uC815\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TransitionLayout, {\n      title: \"\\uCC44\\uD305\",\n      requiredLogin: true,\n      children: \"CHAT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default ChatPage;","map":{"version":3,"sources":["/Users/munhagju/DoraemonPlateV1/frontend/pages/chat/index.tsx"],"names":["React","useState","useEffect","TransitionLayout","BasicPageTitle","io","socket","ChatPage","name","setName","text","setText","messages","setMessages","receivedMessage","message","newMessage","id","on","sendMessage","emit"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC,C,CACA;;AACA,OAAOC,gBAAP,MAA6B,0CAA7B;AACA,OAAOC,cAAP,MAA2B,kDAA3B;AACA,SAAQC,EAAR,QAAiB,kBAAjB;AAYA,MAAMC,MAAM,GAAGD,EAAE,CAAC,uBAAD,CAAjB;;AAEA,MAAME,QAAQ,GAAG,MAAmB;AAClC,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBR,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM;AAAA,OAACS,IAAD;AAAA,OAAOC;AAAP,MAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM;AAAA,OAACW,QAAD;AAAA,OAAWC;AAAX,MAA0BZ,QAAQ,CAAY,EAAZ,CAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AAEd,aAASY,eAAT,CAAyBC,OAAzB,EAA2C;AACzC,YAAMC,UAAmB,GAAG;AAC1BC,QAAAA,EAAE,EAAE,MADsB;AAE1BT,QAAAA,IAAI,EAAEO,OAAO,CAACP,IAFY;AAG1BE,QAAAA,IAAI,EAAEK,OAAO,CAACL;AAHY,OAA5B;AAMAG,MAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAcI,UAAd,CAAD,CAAX;AACD;;AAEDV,IAAAA,MAAM,CAACY,EAAP,CAAU,SAAV,EAAsBH,OAAD,IAAsB;AACzCD,MAAAA,eAAe,CAACC,OAAD,CAAf;AACD,KAFD;AAGD,GAfQ,EAeN,CAACH,QAAD,EAAWJ,IAAX,EAAiBE,IAAjB,CAfM,CAAT;;AAkBA,WAASS,WAAT,GAAuB;AACrB,UAAMJ,OAAgB,GAAG;AACvBP,MAAAA,IADuB;AAEvBE,MAAAA;AAFuB,KAAzB;AAIAJ,IAAAA,MAAM,CAACc,IAAP,CAAY,SAAZ,EAAuBL,OAAvB;AACAJ,IAAAA,OAAO,CAAC,EAAD,CAAP;AACD;;AAED,sBACE;AAAA,4BACE,QAAC,cAAD;AAAgB,MAAA,KAAK,EAAC,cAAtB;AAA2B,MAAA,WAAW,EAAC;AAAvC;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,gBAAD;AAAkB,MAAA,KAAK,EAAC,cAAxB;AAA6B,MAAA,aAAa,EAAE,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA,kBADF;AAQD,CAxCD;;AA2CA,eAAeJ,QAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\n// import AppLayout from \"../../components/layout/AppLayout\";\nimport TransitionLayout from \"../../components/layout/TransitionLayout\"; \nimport BasicPageTitle from '../../components/layout/pagetitle/BasicPageTitle';  \nimport {io} from 'socket.io-client';\n\ninterface Message {\n  id: string; \n  name: string;\n  text: string;\n}\n\ninterface Payload{\n  name: string;\n  text: string;\n}\nconst socket = io('http://localhost:8080');\n\nconst ChatPage = (): JSX.Element => {   \n  const [name, setName] = useState('');\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState<Message[]>([]);\n\n  useEffect(() => {\n    \n    function receivedMessage(message: Payload) {\n      const newMessage: Message = {\n        id: \"test\",\n        name: message.name,\n        text: message.text\n      }\n\n      setMessages([...messages, newMessage]);\n    }\n\n    socket.on('message', (message: Payload) => {\n      receivedMessage(message);\n    });\n  }, [messages, name, text]);  \n\n\n  function sendMessage() {\n    const message: Payload = {\n      name,\n      text\n    }\n    socket.emit('message', message);\n    setText('');\n  }\n\n  return ( \n    <>\n      <BasicPageTitle title=\"채팅\" description=\"채팅 페이지 작업예정\" />  \n      <TransitionLayout title=\"채팅\" requiredLogin={true}>  \n        CHAT \n      </TransitionLayout> \n    </>\n  ); \n};\n\n  \nexport default ChatPage; "]},"metadata":{},"sourceType":"module"}