{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/munhagju/DoraemonPlateV1/frontend/components/rooms/JoinRoomForm.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useContext, useCallback } from \"react\";\nimport UserProfileContext from \"../contexts/profile/UserProfileContext\";\nimport SocketContext from \"../contexts/socket/SocketContext\";\nimport { useRoomState } from \"../contexts/socket/useRoomState\";\nexport var JoinRoomForm = function JoinRoomForm(_ref) {\n  _s();\n\n  var roomId = _ref.roomId;\n  var profile = useContext(UserProfileContext);\n  var socket = useContext(SocketContext);\n\n  var _useRoomState = useRoomState(),\n      joinable = _useRoomState.joinable,\n      joined = _useRoomState.joined;\n  /**\r\n   * join the room with the specified name\r\n   */\n\n\n  var handleJoin = useCallback(function () {\n    if (!joinable) {\n      return;\n    }\n\n    socket.join(roomId);\n  }, [joinable, socket, roomId]);\n  /**\r\n   * leave the current room\r\n   */\n\n  var handleLeave = useCallback(function () {\n    socket.leave();\n  }, [socket]);\n  /**\r\n   * update user name\r\n   */\n\n  var handleNameChange = useCallback(function (e) {\n    profile.name = e.target.value;\n  }, [profile]);\n  /**\r\n   * handle form submission (call join)\r\n   */\n\n  var handleSubmit = useCallback(function (ev) {\n    ev.preventDefault();\n    handleJoin();\n  }, [handleJoin]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"hello world! \", joined ? \"you've just joined\" : \"you are about to join\", \" \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: roomId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, _this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, _this), joined ? /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"you can leave this room at any time:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLeave,\n        children: \"leave\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"enter your name and hit button to join this room:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: (profile === null || profile === void 0 ? void 0 : profile.name) || \"\",\n        onChange: handleNameChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleJoin,\n        disabled: !joinable,\n        children: \"join\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(JoinRoomForm, \"X5ffgmoSVulLcKmxgY5xV9u0eJY=\", false, function () {\n  return [useRoomState];\n});\n\n_c = JoinRoomForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinRoomForm\");","map":{"version":3,"sources":["/Users/munhagju/DoraemonPlateV1/frontend/components/rooms/JoinRoomForm.tsx"],"names":["useContext","useCallback","UserProfileContext","SocketContext","useRoomState","JoinRoomForm","roomId","profile","socket","joinable","joined","handleJoin","join","handleLeave","leave","handleNameChange","e","name","target","value","handleSubmit","ev","preventDefault"],"mappings":";;;;;;AAAA,SAAaA,UAAb,EAAyBC,WAAzB,QAAoE,OAApE;AAEA,OAAOC,kBAAP,MAA+B,wCAA/B;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AACA,SAASC,YAAT,QAA6B,iCAA7B;AAMA,OAAO,IAAMC,YAAwB,GAAG,SAA3BA,YAA2B,OAAgB;AAAA;;AAAA,MAAbC,MAAa,QAAbA,MAAa;AACtD,MAAMC,OAAO,GAAGP,UAAU,CAACE,kBAAD,CAA1B;AACA,MAAMM,MAAM,GAAGR,UAAU,CAACG,aAAD,CAAzB;;AAFsD,sBAGzBC,YAAY,EAHa;AAAA,MAG9CK,QAH8C,iBAG9CA,QAH8C;AAAA,MAGpCC,MAHoC,iBAGpCA,MAHoC;AAKtD;AACF;AACA;;;AACE,MAAMC,UAAU,GAAGV,WAAW,CAAC,YAAM;AACnC,QAAI,CAACQ,QAAL,EAAe;AACb;AACD;;AACDD,IAAAA,MAAM,CAACI,IAAP,CAAYN,MAAZ;AACD,GAL6B,EAK3B,CAACG,QAAD,EAAWD,MAAX,EAAmBF,MAAnB,CAL2B,CAA9B;AAOA;AACF;AACA;;AACE,MAAMO,WAAW,GAAGZ,WAAW,CAAC,YAAM;AACpCO,IAAAA,MAAM,CAACM,KAAP;AACD,GAF8B,EAE5B,CAACN,MAAD,CAF4B,CAA/B;AAIA;AACF;AACA;;AACE,MAAMO,gBAAgB,GAAGd,WAAW,CAClC,UAACe,CAAD,EAAsC;AACpCT,IAAAA,OAAO,CAACU,IAAR,GAAeD,CAAC,CAACE,MAAF,CAASC,KAAxB;AACD,GAHiC,EAIlC,CAACZ,OAAD,CAJkC,CAApC;AAOA;AACF;AACA;;AACE,MAAMa,YAAY,GAAGnB,WAAW,CAC9B,UAACoB,EAAD,EAAoC;AAClCA,IAAAA,EAAE,CAACC,cAAH;AACAX,IAAAA,UAAU;AACX,GAJ6B,EAK9B,CAACA,UAAD,CAL8B,CAAhC;AAQA,sBACE;AAAA,4BACE;AAAA,kCACgBD,MAAM,GAAG,oBAAH,GAA0B,uBADhD,EACyE,GADzE,eAEE;AAAA,kBAAOJ;AAAP;AAAA;AAAA;AAAA;AAAA,eAFF;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAKGI,MAAM,gBACL;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAQ,QAAA,OAAO,EAAEG,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF;AAAA;AAAA;AAAA;AAAA;AAAA,aADK,gBAML;AAAM,MAAA,QAAQ,EAAEO,YAAhB;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,KAAK,EAAE,CAAAb,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEU,IAAT,KAAiB,EAF1B;AAGE,QAAA,QAAQ,EAAEF;AAHZ;AAAA;AAAA;AAAA;AAAA,eAFF,eAOE;AAAQ,QAAA,OAAO,EAAEJ,UAAjB;AAA6B,QAAA,QAAQ,EAAE,CAACF,QAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAPF;AAAA;AAAA;AAAA;AAAA;AAAA,aAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AA0BD,CArEM;;GAAMJ,Y;UAGkBD,Y;;;KAHlBC,Y","sourcesContent":["import { FC, useContext, useCallback, ChangeEvent, FormEvent } from \"react\";\r\n\r\nimport UserProfileContext from \"../contexts/profile/UserProfileContext\";\r\nimport SocketContext from \"../contexts/socket/SocketContext\";\r\nimport { useRoomState } from \"../contexts/socket/useRoomState\";\r\n\r\ninterface IProps {\r\n  roomId: string;\r\n}\r\n\r\nexport const JoinRoomForm: FC<IProps> = ({ roomId }) => {\r\n  const profile = useContext(UserProfileContext);\r\n  const socket = useContext(SocketContext);\r\n  const { joinable, joined } = useRoomState();\r\n\r\n  /**\r\n   * join the room with the specified name\r\n   */\r\n  const handleJoin = useCallback(() => {\r\n    if (!joinable) {\r\n      return;\r\n    }\r\n    socket.join(roomId);\r\n  }, [joinable, socket, roomId]);\r\n\r\n  /**\r\n   * leave the current room\r\n   */\r\n  const handleLeave = useCallback(() => {\r\n    socket.leave();\r\n  }, [socket]);\r\n\r\n  /**\r\n   * update user name\r\n   */\r\n  const handleNameChange = useCallback(\r\n    (e: ChangeEvent<HTMLInputElement>) => {\r\n      profile.name = e.target.value;\r\n    },\r\n    [profile]\r\n  );\r\n\r\n  /**\r\n   * handle form submission (call join)\r\n   */\r\n  const handleSubmit = useCallback(\r\n    (ev: FormEvent<HTMLFormElement>) => {\r\n      ev.preventDefault();\r\n      handleJoin();\r\n    },\r\n    [handleJoin]\r\n  );\r\n\r\n  return (\r\n    <section>\r\n      <p>\r\n        hello world! {joined ? \"you've just joined\" : \"you are about to join\"}{\" \"}\r\n        <code>{roomId}</code>.\r\n      </p>\r\n      {joined ? (\r\n        <section>\r\n          <p>you can leave this room at any time:</p>\r\n          <button onClick={handleLeave}>leave</button>\r\n        </section>\r\n      ) : (\r\n        <form onSubmit={handleSubmit}>\r\n          <p>enter your name and hit button to join this room:</p>\r\n          <input\r\n            type=\"text\"\r\n            value={profile?.name || \"\"}\r\n            onChange={handleNameChange}\r\n          />\r\n          <button onClick={handleJoin} disabled={!joinable}>\r\n            join\r\n          </button>\r\n        </form>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}