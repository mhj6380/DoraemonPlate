{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/munhagju/DoraemonPlateV1/frontend/pages/auth/register.tsx\";\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport { TextField } from \"@material-ui/core\";\nimport { BACKEND_URL } from '../../config';\nimport { useCookies } from \"react-cookie\";\nimport { Title, ViewWrapper, LoginFormWrapper, NoAccount, CheckboxWrapper, FieldWrapper, SubmitBtn, ValidationAlert } from './styled';\nimport { useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport myAxios from \"../../util/axios\";\n\nconst RegisterForm = () => {\n  const {\n    me\n  } = useSelector(state => state.user);\n  const Router = useRouter();\n  const [email, setEmail] = React.useState(\"hakgu@gmail.com\");\n  const [nickname, setNickname] = React.useState(\"hakgu\");\n  const [password, setPassword] = React.useState(\"roahdla99!\");\n  const [passwordConfirm, setPasswordConfirm] = React.useState(\"roahdla99!\");\n  const [agree, setAgree] = React.useState(false);\n  const [cookies, setCookie] = useCookies([\"accessToken\"]); // ValidationForm\n\n  const {\n    0: valiEmail,\n    1: setValiEmail\n  } = useState(\"\");\n  const {\n    0: valiPwd,\n    1: setValiPwd\n  } = useState(\"\");\n  const {\n    0: valiPwdConfirm,\n    1: setValiPwdConfirm\n  } = useState(\"\");\n  const {\n    0: valiNickname,\n    1: setValiNickname\n  } = useState(\"\");\n\n  const handleOnSubmit = async e => {\n    e.preventDefault(); // alert(\"TQ\");\n    // return;\n\n    if (!validationEmail(email, true)) {\n      return false;\n    }\n\n    if (!validationPasswd(password, true)) {\n      return false;\n    }\n\n    if (!email) setValiEmail(\"이메일을 입력해주세요.\");\n    if (!nickname) setValiNickname(\"닉네임을 입력해주세요.\");\n    if (!password) setValiPwd(\"비밀번호를 입력해주세요.\");\n    if (!passwordConfirm) setValiPwdConfirm(\"비밀번호 확인을 입력해주세요.\");\n\n    if (!email || !password || !passwordConfirm || !nickname) {\n      alert(\"정보를 모두 입력해주세요\");\n      return;\n    }\n\n    if (!validationPasswdConfirm(passwordConfirm, true)) {\n      return false;\n    } // if (password !== passwordConfirm) {\n    //   alert(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n    //   setPassword(\"\");\n    //   setPasswordConfirm(\"\");\n    //   return;\n    // }\n\n\n    try {\n      const token = await myAxios.post(BACKEND_URL + \"/auth/register\", {\n        user_id: email,\n        password,\n        nickname\n      }).catch(function (error) {\n        if (error.response) {\n          // 요청이 이루어졌으며 서버가 2xx의 범위를 벗어나는 상태 코드로 응답했습니다.\n          console.log(error.response.status);\n          console.log(error.response.headers);\n          return alert(error.response.data.message);\n        } else if (error.request) {\n          // 요청이 이루어 졌으나 응답을 받지 못했습니다.\n          // `error.request`는 브라우저의 XMLHttpRequest 인스턴스 또는\n          // Node.js의 http.ClientRequest 인스턴스입니다.\n          console.log(error.request);\n        } else {\n          // 오류를 발생시킨 요청을 설정하는 중에 문제가 발생했습니다.\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n      });\n      console.log(token); // if (token.status === 200) {\n      //   setCookie(\"accessToken\", token.data.accessToken, {\n      //     path: \"/\",\n      //     maxAge: 100000,\n      //   });\n      //   setCookie(\"refreshToken\", token.data.refreshToken, {\n      //     path: \"/\",\n      //     maxAge: 700000,\n      //   }); \n      //   console.log(cookies); \n      //   alert(token.data.message); \n      //   window.location.href = \"/\"; \n      //   return;\n      // } else {\n      //   alert(token.data.message);\n      //   return; \n      // }\n    } catch (err) {\n      alert(err);\n      setEmail(\"\");\n      setPassword(\"\");\n      setPasswordConfirm(\"\");\n      return;\n    }\n  }; // 이메일 정규표현식 체크\n\n\n  const validationEmail = (email, submit) => {\n    // var email = e.target.value;\n    setEmail(email);\n    var exptext = /^[A-Za-z0-9_\\.\\-]+@[A-Za-z0-9\\-]+\\.[A-Za-z0-9\\-]+/;\n\n    if (exptext.test(email) === false) {\n      if (email === \"\") {\n        //이메일 형식이 알파벳+숫자@알파벳+숫자.알파벳+숫자 형식이 아닐경우\n        if (submit) {\n          setValiEmail(\"이메일은 필수 입력 항목입니다.\");\n        }\n      } else {\n        if (submit) {\n          setValiEmail(\"이메일 형식이 올바르지 않습니다.\");\n        }\n      }\n\n      return false;\n    }\n\n    setValiEmail(\"\");\n    return true;\n  };\n\n  const validationPasswd = (pw, submit) => {\n    setPassword(pw);\n    var num = pw.search(/[0-9]/g);\n    var eng = pw.search(/[a-z]/gi);\n\n    if (pw.length < 8 || pw.length > 20) {\n      if (submit) {\n        setValiPwd(\"8자리 ~ 20자리 이내로 입력해주세요.\");\n      }\n\n      return false;\n    } else if (pw.search(/\\s/) !== -1) {\n      if (submit) {\n        setValiPwd(\"비밀번호는 공백 없이 입력해주세요.\");\n      }\n\n      return false;\n    } else if (num < 0 || eng < 0) {\n      if (submit) {\n        setValiPwd(\"영문,숫자를 혼합하여 입력해주세요.\");\n      }\n\n      return false;\n    } else {\n      setValiPwd(\"\");\n      return true;\n    }\n  };\n\n  const validationPasswdConfirm = (pwConfirm, submit) => {\n    setPasswordConfirm(pwConfirm);\n\n    if (password !== pwConfirm) {\n      if (submit) {\n        setValiPwdConfirm(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n      }\n\n      return false;\n    } else {\n      setValiPwdConfirm(\"\");\n      return true;\n    }\n  }; // 이미 로그인중이라면 메인으로 \n\n\n  if (me) Router.push('/');\n  return /*#__PURE__*/_jsxDEV(ViewWrapper, {\n    children: /*#__PURE__*/_jsxDEV(LoginFormWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uC774\\uBA54\\uC77C\",\n        type: \"text\",\n        val: email,\n        setVal: setEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ValidationAlert, {\n        children: valiEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uB2C9\\uB124\\uC784\",\n        type: \"text\",\n        val: nickname,\n        setVal: setNickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ValidationAlert, {\n        children: valiNickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n        type: \"password\",\n        val: password,\n        setVal: setPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ValidationAlert, {\n        children: valiPwd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n        label: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",\n        type: \"password\",\n        val: passwordConfirm,\n        setVal: setPasswordConfirm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ValidationAlert, {\n        children: valiPwdConfirm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CheckboxWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"longsession\",\n          children: [\"\\uAC1C\\uC778\\uC815\\uBCF4 \\uCC98\\uB9AC\\uBC29\\uCE68 \\uB3D9\\uC758 (\\uD544\\uC218)\", /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"longsession\",\n            type: \"checkbox\",\n            onChange: () => {\n              setAgree(!agree);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n          target: \"_blank\",\n          href: \"/agree\",\n          children: \"\\uB0B4\\uC6A9\\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"longsession\",\n          children: [\"\\uC11C\\uBE44\\uC2A4 \\uC774\\uC6A9\\uC57D\\uAD00 \\uB3D9\\uC758 (\\uD544\\uC218)\", /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"longsession\",\n            type: \"checkbox\",\n            onChange: () => {\n              setAgree(!agree);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n          target: \"_blank\",\n          href: \"/agree\",\n          children: \"\\uB0B4\\uC6A9\\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SubmitBtn, {\n        onClick: handleOnSubmit,\n        children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NoAccount, {\n        children: [\"\\uC774\\uBBF8 \\uACC4\\uC815\\uC774 \\uC788\\uC73C\\uC2E0\\uAC00\\uC694? \", /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/auth/login\",\n          children: \"\\uB85C\\uADF8\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n};\n\nconst LoginTextField = props => {\n  const {\n    label,\n    type,\n    val,\n    setVal\n  } = props;\n  return /*#__PURE__*/_jsxDEV(FieldWrapper, {\n    children: /*#__PURE__*/_jsxDEV(TextField, {\n      label: label,\n      fullWidth: true,\n      value: val,\n      type: type,\n      onChange: e => {\n        setVal(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 266,\n    columnNumber: 5\n  }, this);\n};\n\nexport default RegisterForm;","map":{"version":3,"sources":["/Users/munhagju/DoraemonPlateV1/frontend/pages/auth/register.tsx"],"names":["React","useState","Link","TextField","BACKEND_URL","useCookies","Title","ViewWrapper","LoginFormWrapper","NoAccount","CheckboxWrapper","FieldWrapper","SubmitBtn","ValidationAlert","useSelector","useRouter","myAxios","RegisterForm","me","state","user","Router","email","setEmail","nickname","setNickname","password","setPassword","passwordConfirm","setPasswordConfirm","agree","setAgree","cookies","setCookie","valiEmail","setValiEmail","valiPwd","setValiPwd","valiPwdConfirm","setValiPwdConfirm","valiNickname","setValiNickname","handleOnSubmit","e","preventDefault","validationEmail","validationPasswd","alert","validationPasswdConfirm","token","post","user_id","catch","error","response","console","log","status","headers","data","message","request","config","err","submit","exptext","test","pw","num","search","eng","length","pwConfirm","push","LoginTextField","props","label","type","val","setVal","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { TextField } from \"@material-ui/core\";\nimport { BACKEND_URL } from '../../config';\nimport { useCookies } from \"react-cookie\";\nimport { Title,ViewWrapper,LoginFormWrapper,NoAccount,CheckboxWrapper,FieldWrapper,SubmitBtn,ValidationAlert } from './styled';\nimport { useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport myAxios from \"../../util/axios\"; \nconst RegisterForm = () => { \n  const { me } = useSelector((state:any) => state.user);\n  const Router = useRouter();\n\n  const [email, setEmail] = React.useState(\"hakgu@gmail.com\");\n  const [nickname, setNickname] = React.useState(\"hakgu\");\n  const [password, setPassword] = React.useState(\"roahdla99!\");\n  const [passwordConfirm, setPasswordConfirm] = React.useState(\"roahdla99!\");\n  const [agree, setAgree] = React.useState(false);\n  const [cookies, setCookie] = useCookies([\"accessToken\"]);\n \n  // ValidationForm\n  const [valiEmail, setValiEmail] = useState(\"\");\n  const [valiPwd, setValiPwd] = useState(\"\");\n  const [valiPwdConfirm, setValiPwdConfirm] = useState(\"\");\n  const [valiNickname, setValiNickname] = useState(\"\");\n  \n\n  const handleOnSubmit = async (e:any) => {\n    e.preventDefault();\n    // alert(\"TQ\");\n    // return;\n\n    if(!validationEmail(email, true)){ \n      return false;\n    }\n\n    if (!validationPasswd(password, true)) {\n      return false;\n    }\n\n\n    if (!email) setValiEmail(\"이메일을 입력해주세요.\"); \n    if (!nickname) setValiNickname(\"닉네임을 입력해주세요.\"); \n    if (!password) setValiPwd(\"비밀번호를 입력해주세요.\");  \n    if (!passwordConfirm) setValiPwdConfirm(\"비밀번호 확인을 입력해주세요.\");  \n    \n  \n    if (!email || !password || !passwordConfirm || !nickname) {\n      alert(\"정보를 모두 입력해주세요\");\n      return;\n    }\n\n\n    if (!validationPasswdConfirm(passwordConfirm, true)) {\n      return false;\n    }\n\n    // if (password !== passwordConfirm) {\n    //   alert(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n    //   setPassword(\"\");\n    //   setPasswordConfirm(\"\");\n    //   return;\n    // }\n\n\n    try {\n      const token:any = await myAxios \n        .post(BACKEND_URL + \"/auth/register\", { \n          user_id: email,\n          password,\n          nickname \n        })\n        .catch(function (error) {\n          if (error.response) {\n            // 요청이 이루어졌으며 서버가 2xx의 범위를 벗어나는 상태 코드로 응답했습니다.\n            console.log(error.response.status);\n            console.log(error.response.headers);\n            return alert(error.response.data.message); \n          }\n          else if (error.request) {\n            // 요청이 이루어 졌으나 응답을 받지 못했습니다.\n            // `error.request`는 브라우저의 XMLHttpRequest 인스턴스 또는\n            // Node.js의 http.ClientRequest 인스턴스입니다.\n            console.log(error.request);\n          }\n          else {\n            // 오류를 발생시킨 요청을 설정하는 중에 문제가 발생했습니다.\n            console.log('Error', error.message);\n          }\n          console.log(error.config);\n        }); \n      \n      console.log(token);\n      // if (token.status === 200) {\n      //   setCookie(\"accessToken\", token.data.accessToken, {\n      //     path: \"/\",\n      //     maxAge: 100000,\n      //   });\n      //   setCookie(\"refreshToken\", token.data.refreshToken, {\n      //     path: \"/\",\n      //     maxAge: 700000,\n      //   }); \n      //   console.log(cookies); \n      //   alert(token.data.message); \n      //   window.location.href = \"/\"; \n      //   return;\n      // } else {\n      //   alert(token.data.message);\n      //   return; \n      // }\n    } catch (err) {\n      alert(err);\n      setEmail(\"\");\n      setPassword(\"\");\n      setPasswordConfirm(\"\");\n      return;\n    }\n  };\n\n\n  // 이메일 정규표현식 체크\n  const validationEmail = (email, submit) => {\n    // var email = e.target.value;\n    setEmail(email);\n    var exptext = /^[A-Za-z0-9_\\.\\-]+@[A-Za-z0-9\\-]+\\.[A-Za-z0-9\\-]+/;\n    if (exptext.test(email) === false) {\n      if (email === \"\") {\n        //이메일 형식이 알파벳+숫자@알파벳+숫자.알파벳+숫자 형식이 아닐경우\n        if (submit) {\n          setValiEmail(\"이메일은 필수 입력 항목입니다.\");\n        }\n      } else {\n        if (submit) {\n          setValiEmail(\"이메일 형식이 올바르지 않습니다.\");\n        }\n      } \n      return false;\n    }\n    setValiEmail(\"\");\n    return true;\n  };\n\n  const validationPasswd = (pw, submit) => {\n    setPassword(pw);\n    var num = pw.search(/[0-9]/g);\n    var eng = pw.search(/[a-z]/gi);\n\n    if (pw.length < 8 || pw.length > 20) {\n      if (submit) {\n        setValiPwd(\"8자리 ~ 20자리 이내로 입력해주세요.\");\n      } \n      return false;\n    } else if (pw.search(/\\s/) !== -1) {\n      if (submit) {\n        setValiPwd(\"비밀번호는 공백 없이 입력해주세요.\");\n      } \n      return false;\n    } else if (num < 0 || eng < 0) {\n      if (submit) {\n        setValiPwd(\"영문,숫자를 혼합하여 입력해주세요.\");\n      }\n      return false;\n    } else {\n      setValiPwd(\"\");\n      return true; \n    }\n  };\n\n  const validationPasswdConfirm = (pwConfirm, submit) => {\n    setPasswordConfirm(pwConfirm);\n    if (password !== pwConfirm) {\n      if (submit) {\n        setValiPwdConfirm(\"비밀번호와 비밀번호 확인이 일치하지 않습니다.\");\n      } \n      return false;\n    } else {\n      setValiPwdConfirm(\"\");\n      return true;\n    }\n  };\n\n  // 이미 로그인중이라면 메인으로 \n  if (me) Router.push('/'); \n\n  return (\n    <ViewWrapper>\n      <LoginFormWrapper>\n        <Title>Sign up</Title>\n        <LoginTextField\n          label=\"이메일\"\n          type=\"text\"\n          val={email}\n          setVal={setEmail}\n        />\n        <ValidationAlert>{valiEmail}</ValidationAlert>\n        <LoginTextField\n          label=\"닉네임\"\n          type=\"text\"\n          val={nickname}\n          setVal={setNickname}\n        />\n        <ValidationAlert>{valiNickname}</ValidationAlert>\n\n        <LoginTextField\n          label=\"비밀번호\"\n          type=\"password\"\n          val={password}\n          setVal={setPassword}\n        />\n        <ValidationAlert>{valiPwd}</ValidationAlert>\n        <LoginTextField\n          label=\"비밀번호 확인\"\n          type=\"password\"\n          val={passwordConfirm}\n          setVal={setPasswordConfirm}\n        /> \n        <ValidationAlert>{valiPwdConfirm}</ValidationAlert>\n        <CheckboxWrapper>\n          <label htmlFor=\"longsession\">\n            개인정보 처리방침 동의 (필수)\n            <input \n              id=\"longsession\"\n              type=\"checkbox\"\n              onChange={() => {\n                setAgree(!agree);\n              }}\n            />\n          </label>\n          &nbsp;&nbsp;\n          <a target=\"_blank\" href=\"/agree\">\n            내용보기\n          </a>\n          <br />\n          <br />\n          <label htmlFor=\"longsession\">\n            서비스 이용약관 동의 (필수)\n            <input\n              id=\"longsession\"\n              type=\"checkbox\"\n              onChange={() => {\n                setAgree(!agree);\n              }}\n            />\n          </label>\n          &nbsp;&nbsp;\n          <a target=\"_blank\" href=\"/agree\">\n            내용보기\n          </a>\n        </CheckboxWrapper>\n        \n        <SubmitBtn onClick={handleOnSubmit}>회원가입</SubmitBtn>\n        <NoAccount>\n          이미 계정이 있으신가요? <Link href=\"/auth/login\">로그인</Link>\n        </NoAccount>\n      </LoginFormWrapper>\n    </ViewWrapper>\n  );\n};\n\n\n\nconst LoginTextField = (props) => {\n  const { label, type, val, setVal } = props;\n  return (\n    <FieldWrapper>\n      <TextField\n        label={label}\n        fullWidth\n        value={val}\n        type={type}\n        onChange={(e) => {\n          setVal(e.target.value);\n        }}\n      />\n    </FieldWrapper>\n  );\n};\n\n\nexport default RegisterForm;\n"]},"metadata":{},"sourceType":"module"}