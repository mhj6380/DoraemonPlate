{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/munhagju/DoraemonPlateV1/frontend/pages/chat/index.tsx\";\nimport React, { useState, useEffect } from \"react\"; // import AppLayout from \"../../components/layout/AppLayout\";\n\nimport TransitionLayout from \"../../components/layout/TransitionLayout\";\nimport BasicPageTitle from '../../components/layout/pagetitle/BasicPageTitle';\nimport { Formik, Form } from \"formik\";\nimport BasicTextField from \"../../components/form/material/BasicTextField\";\nimport { Button } from \"@material-ui/core\";\nimport ExGroupChat from \"../../components/example/ExGroupChat\";\nimport useSocket from \"../../hooks/useSocket\";\nimport * as io from \"socket.io-client\";\nconst socket = io('http://localhost:8080', {\n  transports: [\"websocket\"]\n});\n\nconst ChatPage = () => {\n  const socket = useSocket();\n  const {\n    0: name,\n    1: setName\n  } = useState('');\n  const {\n    0: text,\n    1: setText\n  } = useState('');\n  const {\n    0: messages,\n    1: setMessages\n  } = useState([]);\n  useEffect(() => {\n    function receivedMessage(message) {\n      const newMessage = {\n        id: \"test\",\n        name: message.name,\n        text: message.text\n      };\n      setMessages([...messages, newMessage]);\n    }\n\n    if (socket) {\n      socket.on('msgToClient', message => {\n        receivedMessage(message);\n      });\n    }\n\n    console.log(\"WHY!!!!\");\n  }, [socket]); // function sendMessage() {\n  //   const message: Payload = {\n  //     name,\n  //     text\n  //   }\n  //   // socket.emit('msgToServer', message);\n  // }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(BasicPageTitle, {\n      title: \"\\uCC44\\uD305\",\n      description: \"\\uCC44\\uD305 \\uD398\\uC774\\uC9C0 \\uC791\\uC5C5\\uC608\\uC815\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TransitionLayout, {\n      title: \"\\uCC44\\uD305\",\n      requiredLogin: true,\n      children: [\"CHAT\", /*#__PURE__*/_jsxDEV(ExGroupChat, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(Formik, {\n        initialValues: {\n          name: \"hakgu\",\n          text: \"\"\n        },\n        validate: values => {\n          const errors = {}; // text에  !나 ? 가 들어가면 에러를 뿜는 예제 \n\n          if (values.text.includes(\"!\") || values.text.includes(\"?\")) {\n            errors.text = \"! or ? cannot be username\";\n          }\n\n          return errors;\n        },\n        onSubmit: (data, {\n          setSubmitting\n        }) => {\n          setSubmitting(true);\n          console.log(data); // sendMessage();\n\n          setSubmitting(false);\n        },\n        children: ({\n          isSubmitting,\n          values\n        }) => /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(BasicTextField, {\n              name: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              border: \"2px solid black\"\n            },\n            type: \"submit\",\n            color: \"default\",\n            disabled: isSubmitting,\n            disableElevation: true,\n            disableRipple: true,\n            fullWidth: true,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default ChatPage;","map":{"version":3,"sources":["/Users/munhagju/DoraemonPlateV1/frontend/pages/chat/index.tsx"],"names":["React","useState","useEffect","TransitionLayout","BasicPageTitle","Formik","Form","BasicTextField","Button","ExGroupChat","useSocket","io","socket","transports","ChatPage","name","setName","text","setText","messages","setMessages","receivedMessage","message","newMessage","id","on","console","log","values","errors","includes","data","setSubmitting","isSubmitting","border"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\n// import AppLayout from \"../../components/layout/AppLayout\";\nimport TransitionLayout from \"../../components/layout/TransitionLayout\"; \nimport BasicPageTitle from '../../components/layout/pagetitle/BasicPageTitle';  \nimport { Formik, Form } from \"formik\";\nimport BasicTextField from \"../../components/form/material/BasicTextField\"; \nimport { Button } from \"@material-ui/core\";\nimport ExGroupChat from \"../../components/example/ExGroupChat\";\nimport useSocket from \"../../hooks/useSocket\";\nimport * as io from \"socket.io-client\";   \n\n\ninterface Message {\n  id: string;  \n  name: string;  \n  text: string; \n}\n\ninterface Payload{\n  name: string;\n  text: string;\n}\n\n\nconst socket = io('http://localhost:8080', { transports: [\"websocket\"] }); \n \n \nconst ChatPage = (): JSX.Element => {   \n  const socket = useSocket(); \n  const [name, setName] = useState('');\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState<Message[]>([]);\n  \n  \n  useEffect(() => {\n    \n    function receivedMessage(message: Payload) {\n      const newMessage: Message = {\n        id: \"test\",\n        name: message.name,\n        text: message.text\n      }\n\n      setMessages([...messages, newMessage]);\n    }\n \n    if(socket){\n        socket.on('msgToClient', (message: Payload) => {\n          receivedMessage(message);\n        });\n    }\n\n    console.log(\"WHY!!!!\");\n    \n  }, [socket]);  \n \n\n  // function sendMessage() {\n  //   const message: Payload = {\n  //     name,\n  //     text\n  //   }\n  //   // socket.emit('msgToServer', message);\n  // }\n\n  return ( \n    <>\n      <BasicPageTitle title=\"채팅\" description=\"채팅 페이지 작업예정\" />  \n      <TransitionLayout title=\"채팅\" requiredLogin={true}>  \n        CHAT \n         <ExGroupChat/>\n\n        <Formik initialValues={{ name:\"hakgu\", text: \"\" }}\n        validate={values => {\n          const errors: Record<string, string> = {} \n          // text에  !나 ? 가 들어가면 에러를 뿜는 예제 \n          if (values.text.includes(\"!\") || values.text.includes(\"?\")) {  \n            errors.text = \"! or ? cannot be username\" \n          }\n          return errors;\n        }}\n        onSubmit={(data, { setSubmitting }) => {\n              setSubmitting(true) \n          console.log(data)\n          // sendMessage();\n              setSubmitting(false) \n            }}>\n  \n            { \n                ({ isSubmitting, values }) => (\n                <Form> \n                      <div>\n                      <BasicTextField name=\"text\" />  \n                    </div>\n                      <Button style={{border: \"2px solid black\"}} type=\"submit\" color=\"default\" disabled={isSubmitting} disableElevation disableRipple fullWidth>Submit</Button>\n                </Form> \n                )  \n              }\n\n            </Formik>\n        \n      </TransitionLayout> \n    </>\n  ); \n};\n\n  \nexport default ChatPage;"]},"metadata":{},"sourceType":"module"}