{"ast":null,"code":"import _toConsumableArray from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/munhagju/DoraemonPlateV1/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/munhagju/DoraemonPlateV1/frontend/components/form/QuilTest.jsx\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport ReactQuill, { Quill } from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport axios from 'axios';\n\nvar __ISMSIE__ = navigator.userAgent.match(/Trident/i) ? true : false; // Quill.register('modules/clipboard', PlainClipboard, true);\n\n\nvar QuillClipboard = Quill[\"import\"]('modules/clipboard');\n\nvar Clipboard = /*#__PURE__*/function (_QuillClipboard) {\n  _inherits(Clipboard, _QuillClipboard);\n\n  var _super = _createSuper(Clipboard);\n\n  function Clipboard() {\n    var _this;\n\n    _classCallCheck(this, Clipboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"getMetaTagElements\", function (stringContent) {\n      var el = document.createElement('div');\n      el.innerHTML = stringContent;\n      return el.getElementsByTagName('meta');\n    });\n\n    return _this;\n  }\n\n  _createClass(Clipboard, [{\n    key: \"onPaste\",\n    value: function () {\n      var _onPaste = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var _this2 = this;\n\n        var clipboardData, pastedData, urlMatches;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                clipboardData = e.clipboardData || window.clipboardData;\n                _context.next = 3;\n                return clipboardData.getData('Text');\n\n              case 3:\n                pastedData = _context.sent;\n                urlMatches = pastedData.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\n\n                if (urlMatches.length > 0) {\n                  e.preventDefault();\n                  urlMatches.forEach(function (link) {\n                    axios.get(link).then(function (payload) {\n                      // let title, image, url, description;\n                      var title, image, url;\n\n                      var _iterator = _createForOfIteratorHelper(_this2.getMetaTagElements(payload)),\n                          _step;\n\n                      try {\n                        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                          var node = _step.value;\n\n                          if (node.getAttribute('property') === 'og:title') {\n                            title = node.getAttribute('content');\n                          }\n\n                          if (node.getAttribute('property') === 'og:image') {\n                            image = node.getAttribute('content');\n                          }\n\n                          if (node.getAttribute('property') === 'og:url') {\n                            url = node.getAttribute('content');\n                          } // if (node.getAttribute(\"property\") === \"og:description\") {\n                          //     description = node.getAttribute(\"content\");\n                          // }\n\n                        }\n                      } catch (err) {\n                        _iterator.e(err);\n                      } finally {\n                        _iterator.f();\n                      }\n\n                      var rendered = \"<a href=\".concat(url, \" target=\\\"_blank\\\"><div><img src=\").concat(image, \" alt=\").concat(title, \" width=\\\"20%\\\"/><span>\").concat(title, \"</span></div></a>\");\n\n                      var range = _this2.quill.getSelection();\n\n                      var position = range ? range.index : 0;\n\n                      _this2.quill.pasteHTML(position, rendered, 'silent');\n\n                      _this2.quill.setSelection(position + rendered.length);\n                    })[\"catch\"](function (error) {\n                      return console.error(error);\n                    });\n                  });\n                } else {\n                  //console.log('when to use this') 보통 다른 곳에서  paste 한다음에  copy하면 이쪽 걸로 한다.\n                  _get(_getPrototypeOf(Clipboard.prototype), \"onPaste\", this).call(this, e);\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onPaste(_x) {\n        return _onPaste.apply(this, arguments);\n      }\n\n      return onPaste;\n    }()\n  }]);\n\n  return Clipboard;\n}(QuillClipboard);\n\nQuill.register('modules/clipboard', Clipboard, true);\nvar BlockEmbed = Quill[\"import\"]('blots/block/embed');\n\nvar ImageBlot = /*#__PURE__*/function (_BlockEmbed) {\n  _inherits(ImageBlot, _BlockEmbed);\n\n  var _super2 = _createSuper(ImageBlot);\n\n  function ImageBlot() {\n    _classCallCheck(this, ImageBlot);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(ImageBlot, null, [{\n    key: \"create\",\n    value: function create(value) {\n      var imgTag = _get(_getPrototypeOf(ImageBlot), \"create\", this).call(this);\n\n      imgTag.setAttribute('src', value.src);\n      imgTag.setAttribute('alt', value.alt);\n      imgTag.setAttribute('width', '100%');\n      return imgTag;\n    }\n  }, {\n    key: \"value\",\n    value: function value(node) {\n      return {\n        src: node.getAttribute('src'),\n        alt: node.getAttribute('alt')\n      };\n    }\n  }]);\n\n  return ImageBlot;\n}(BlockEmbed);\n\nImageBlot.blotName = 'image';\nImageBlot.tagName = 'img';\nQuill.register(ImageBlot);\n\nvar VideoBlot = /*#__PURE__*/function (_BlockEmbed2) {\n  _inherits(VideoBlot, _BlockEmbed2);\n\n  var _super3 = _createSuper(VideoBlot);\n\n  function VideoBlot() {\n    _classCallCheck(this, VideoBlot);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(VideoBlot, null, [{\n    key: \"create\",\n    value: function create(value) {\n      if (value && value.src) {\n        var videoTag = _get(_getPrototypeOf(VideoBlot), \"create\", this).call(this);\n\n        videoTag.setAttribute('src', value.src);\n        videoTag.setAttribute('title', value.title);\n        videoTag.setAttribute('width', '100%');\n        videoTag.setAttribute('controls', '');\n        return videoTag;\n      } else {\n        var iframeTag = document.createElement('iframe');\n        iframeTag.setAttribute('src', value);\n        iframeTag.setAttribute('frameborder', '0');\n        iframeTag.setAttribute('allowfullscreen', true);\n        iframeTag.setAttribute('width', '100%');\n        return iframeTag;\n      }\n    }\n  }, {\n    key: \"value\",\n    value: function value(node) {\n      if (node.getAttribute('title')) {\n        return {\n          src: node.getAttribute('src'),\n          alt: node.getAttribute('title')\n        };\n      } else {\n        return node.getAttribute('src');\n      } // return { src: node.getAttribute('src'), alt: node.getAttribute('title') };\n\n    }\n  }]);\n\n  return VideoBlot;\n}(BlockEmbed);\n\nVideoBlot.blotName = 'video';\nVideoBlot.tagName = 'video';\nQuill.register(VideoBlot);\n\nvar FileBlot = /*#__PURE__*/function (_BlockEmbed3) {\n  _inherits(FileBlot, _BlockEmbed3);\n\n  var _super4 = _createSuper(FileBlot);\n\n  function FileBlot() {\n    _classCallCheck(this, FileBlot);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(FileBlot, null, [{\n    key: \"create\",\n    value: function create(value) {\n      var prefixTag = document.createElement('span');\n      prefixTag.innerText = '첨부파일 - ';\n      var bTag = document.createElement('b'); //위에 첨부파일 글자 옆에  파일 이름이 b 태그를 사용해서 나온다.\n\n      bTag.innerText = value;\n      var linkTag = document.createElement('a');\n      linkTag.setAttribute('href', value);\n      linkTag.setAttribute('target', '_blank');\n      linkTag.setAttribute('className', 'file-link-inner-post');\n      linkTag.appendChild(bTag); //linkTag 이런식으로 나온다 <a href=\"btn_editPic@3x.png\" target=\"_blank\" classname=\"file-link-inner-post\"><b>btn_editPic@3x.png</b></a>\n\n      var node = _get(_getPrototypeOf(FileBlot), \"create\", this).call(this);\n\n      node.appendChild(prefixTag);\n      node.appendChild(linkTag);\n      return node;\n    }\n  }, {\n    key: \"value\",\n    value: function value(node) {\n      var linkTag = node.querySelector('a');\n      return linkTag.getAttribute('href');\n    }\n  }]);\n\n  return FileBlot;\n}(BlockEmbed);\n\nFileBlot.blotName = 'file';\nFileBlot.tagName = 'p';\nFileBlot.className = 'file-inner-post';\nQuill.register(FileBlot);\n\nvar PollBlot = /*#__PURE__*/function (_BlockEmbed4) {\n  _inherits(PollBlot, _BlockEmbed4);\n\n  var _super5 = _createSuper(PollBlot);\n\n  function PollBlot() {\n    _classCallCheck(this, PollBlot);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(PollBlot, null, [{\n    key: \"create\",\n    value: function create(value) {\n      var prefixTag = document.createElement('span');\n      prefixTag.innerText = '투표 - ';\n      var bTag = document.createElement('b');\n      bTag.innerText = value.title;\n\n      var node = _get(_getPrototypeOf(PollBlot), \"create\", this).call(this);\n\n      node.setAttribute('id', value.id);\n      node.appendChild(prefixTag);\n      node.appendChild(bTag);\n      return node;\n    }\n  }, {\n    key: \"value\",\n    value: function value(node) {\n      var id = node.getAttribute('id');\n      var bTag = node.querySelector('b');\n      var title = bTag.innerText;\n      return {\n        id: id,\n        title: title\n      };\n    }\n  }]);\n\n  return PollBlot;\n}(BlockEmbed);\n\nPollBlot.blotName = 'poll';\nPollBlot.tagName = 'p';\nPollBlot.className = 'poll-inner-post';\nQuill.register(PollBlot);\n\nvar QuillEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(QuillEditor, _React$Component);\n\n  var _super6 = _createSuper(QuillEditor);\n\n  function QuillEditor(props) {\n    var _this3;\n\n    _classCallCheck(this, QuillEditor);\n\n    _this3 = _super6.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this3), \"bandId\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this3), \"placeholder\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this3), \"onEditorChange\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this3), \"onFilesChange\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this3), \"onPollsChange\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this3), \"_isMounted\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this3), \"handleChange\", function (html) {\n      console.log('html', html); // https://youtu.be/BbR-QCoKngE\n      // https://www.youtube.com/embed/ZwKhufmMxko\n      // https://tv.naver.com/v/9176888\n      // renderToStaticMarkup(ReactHtmlParser(html, options));\n\n      _this3.setState({\n        editorHtml: html\n      }, function () {\n        _this3.props.onEditorChange(_this3.state.editorHtml);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"imageHandler\", function () {\n      _this3.inputOpenImageRef.current.click();\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"videoHandler\", function () {\n      _this3.inputOpenVideoRef.current.click();\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"fileHandler\", function () {\n      _this3.inputOpenFileRef.current.click();\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"insertImage\", function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (e.currentTarget && e.currentTarget.files && e.currentTarget.files.length > 0) {\n        var file = e.currentTarget.files[0];\n        var formData = new FormData();\n        var config = {\n          header: {\n            'content-type': 'multipart/form-data'\n          }\n        };\n        formData.append('file', file);\n        axios.post('/api/blog/uploadfiles', formData, config).then(function (response) {\n          if (response.data.success) {\n            var quill = _this3.reactQuillRef.getEditor();\n\n            quill.focus();\n            var range = quill.getSelection();\n            var position = range ? range.index : 0; //먼저 노드 서버에다가 이미지를 넣은 다음에   여기 아래에 src에다가 그걸 넣으면 그게\n            //이미지 블롯으로 가서  크리에이트가 이미지를 형성 하며 그걸 발류에서     src 랑 alt 를 가져간후에  editorHTML에 다가 넣는다.\n\n            quill.insertEmbed(position, 'image', {\n              src: 'http://localhost:5000/' + response.data.url,\n              alt: response.data.fileName\n            });\n            quill.setSelection(position + 1);\n\n            if (_this3._isMounted) {\n              _this3.setState({\n                files: [].concat(_toConsumableArray(_this3.state.files), [file])\n              }, function () {\n                _this3.props.onFilesChange(_this3.state.files);\n              });\n            }\n          } else {\n            return alert('failed to upload file');\n          }\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"insertVideo\", function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (e.currentTarget && e.currentTarget.files && e.currentTarget.files.length > 0) {\n        var file = e.currentTarget.files[0];\n        var formData = new FormData();\n        var config = {\n          header: {\n            'content-type': 'multipart/form-data'\n          }\n        };\n        formData.append('file', file);\n        axios.post('/api/blog/uploadfiles', formData, config).then(function (response) {\n          if (response.data.success) {\n            var quill = _this3.reactQuillRef.getEditor();\n\n            quill.focus();\n            var range = quill.getSelection();\n            var position = range ? range.index : 0;\n            quill.insertEmbed(position, 'video', {\n              src: 'http://localhost:5000/' + response.data.url,\n              title: response.data.fileName\n            });\n            quill.setSelection(position + 1);\n\n            if (_this3._isMounted) {\n              _this3.setState({\n                files: [].concat(_toConsumableArray(_this3.state.files), [file])\n              }, function () {\n                _this3.props.onFilesChange(_this3.state.files);\n              });\n            }\n          } else {\n            return alert('failed to upload file');\n          }\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"insertFile\", function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (e.currentTarget && e.currentTarget.files && e.currentTarget.files.length > 0) {\n        var file = e.currentTarget.files[0];\n        console.log(file);\n        var formData = new FormData();\n        var config = {\n          header: {\n            'content-type': 'multipart/form-data'\n          }\n        };\n        formData.append('file', file);\n        axios.post('/api/blog/uploadfiles', formData, config).then(function (response) {\n          if (response.data.success) {\n            var quill = _this3.reactQuillRef.getEditor();\n\n            quill.focus();\n            var range = quill.getSelection();\n            var position = range ? range.index : 0;\n            quill.insertEmbed(position, 'file', response.data.fileName);\n            quill.setSelection(position + 1);\n\n            if (_this3._isMounted) {\n              _this3.setState({\n                files: [].concat(_toConsumableArray(_this3.state.files), [file])\n              }, function () {\n                _this3.props.onFilesChange(_this3.state.files);\n              });\n            }\n          }\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"modules\", {\n      // syntax: true,\n      toolbar: {\n        container: '#toolbar',\n        //id =\"toorbar\"는  그 위에 B I U S I V F P 이거 있는 곳이다.\n        handlers: {\n          insertImage: _this3.imageHandler,\n          insertVideo: _this3.videoHandler,\n          insertFile: _this3.fileHandler,\n          insertPoll: _this3.pollHandler\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"formats\", ['header', 'bold', 'italic', 'underline', 'strike', 'image', 'video', 'file', 'link', 'code-block', 'video', 'blockquote', 'clean']);\n\n    _this3.state = {\n      editorHtml: __ISMSIE__ ? '<p>&nbsp;</p>' : '',\n      files: []\n    };\n    _this3.reactQuillRef = null;\n    _this3.inputOpenImageRef = /*#__PURE__*/React.createRef();\n    _this3.inputOpenVideoRef = /*#__PURE__*/React.createRef();\n    _this3.inputOpenFileRef = /*#__PURE__*/React.createRef();\n    return _this3;\n  }\n\n  _createClass(QuillEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"ql-header\",\n            defaultValue: '',\n            onChange: function onChange(e) {\n              return e.persist();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-bold\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-italic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-underline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-strike\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-insertImage\",\n            children: \"I\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-insertVideo\",\n            children: \"V\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-insertFile\",\n            children: \"F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-code-block\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-blockquote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ql-clean\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n          ref: function ref(el) {\n            _this4.reactQuillRef = el;\n          },\n          theme: 'snow',\n          onChange: this.handleChange,\n          modules: this.modules,\n          formats: this.formats,\n          value: this.state.editorHtml,\n          placeholder: this.props.placeholder\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          ref: this.inputOpenImageRef,\n          style: {\n            display: 'none'\n          },\n          onChange: this.insertImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"video/*\",\n          ref: this.inputOpenVideoRef,\n          style: {\n            display: 'none'\n          },\n          onChange: this.insertVideo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"*\",\n          ref: this.inputOpenFileRef,\n          style: {\n            display: 'none'\n          },\n          onChange: this.insertFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return QuillEditor;\n}(React.Component);\n\nexport default QuillEditor;","map":{"version":3,"sources":["/Users/munhagju/DoraemonPlateV1/frontend/components/form/QuilTest.jsx"],"names":["React","ReactQuill","Quill","axios","__ISMSIE__","navigator","userAgent","match","QuillClipboard","Clipboard","stringContent","el","document","createElement","innerHTML","getElementsByTagName","e","clipboardData","window","getData","pastedData","urlMatches","length","preventDefault","forEach","link","get","then","payload","title","image","url","getMetaTagElements","node","getAttribute","rendered","range","quill","getSelection","position","index","pasteHTML","setSelection","error","console","register","BlockEmbed","ImageBlot","value","imgTag","setAttribute","src","alt","blotName","tagName","VideoBlot","videoTag","iframeTag","FileBlot","prefixTag","innerText","bTag","linkTag","appendChild","querySelector","className","PollBlot","id","QuillEditor","props","html","log","setState","editorHtml","onEditorChange","state","inputOpenImageRef","current","click","inputOpenVideoRef","inputOpenFileRef","stopPropagation","currentTarget","files","file","formData","FormData","config","header","append","post","response","data","success","reactQuillRef","getEditor","focus","insertEmbed","fileName","_isMounted","onFilesChange","alert","toolbar","container","handlers","insertImage","imageHandler","insertVideo","videoHandler","insertFile","fileHandler","insertPoll","pollHandler","createRef","persist","handleChange","modules","formats","placeholder","display","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactQuill, { Quill } from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\n\nimport axios from 'axios';\nconst __ISMSIE__ = navigator.userAgent.match(/Trident/i) ? true : false;\n\n// Quill.register('modules/clipboard', PlainClipboard, true);\n\nconst QuillClipboard = Quill.import('modules/clipboard');\n\nclass Clipboard extends QuillClipboard {\n  getMetaTagElements = (stringContent) => {\n    const el = document.createElement('div');\n    el.innerHTML = stringContent;\n    return el.getElementsByTagName('meta');\n  };\n\n  async onPaste(e) {\n    let clipboardData = e.clipboardData || window.clipboardData;\n    let pastedData = await clipboardData.getData('Text');\n\n    const urlMatches = pastedData.match(/\\b(http|https)?:\\/\\/\\S+/gi) || [];\n    if (urlMatches.length > 0) {\n      e.preventDefault();\n      urlMatches.forEach((link) => {\n        axios\n          .get(link)\n          .then((payload) => {\n            // let title, image, url, description;\n            let title, image, url;\n            for (let node of this.getMetaTagElements(payload)) {\n              if (node.getAttribute('property') === 'og:title') {\n                title = node.getAttribute('content');\n              }\n              if (node.getAttribute('property') === 'og:image') {\n                image = node.getAttribute('content');\n              }\n              if (node.getAttribute('property') === 'og:url') {\n                url = node.getAttribute('content');\n              }\n              // if (node.getAttribute(\"property\") === \"og:description\") {\n              //     description = node.getAttribute(\"content\");\n              // }\n            }\n\n            const rendered = `<a href=${url} target=\"_blank\"><div><img src=${image} alt=${title} width=\"20%\"/><span>${title}</span></div></a>`;\n\n            let range = this.quill.getSelection();\n            let position = range ? range.index : 0;\n            this.quill.pasteHTML(position, rendered, 'silent');\n            this.quill.setSelection(position + rendered.length);\n          })\n          .catch((error) => console.error(error));\n      });\n    } else {\n      //console.log('when to use this') 보통 다른 곳에서  paste 한다음에  copy하면 이쪽 걸로 한다.\n      super.onPaste(e);\n    }\n  }\n}\nQuill.register('modules/clipboard', Clipboard, true);\n\nconst BlockEmbed = Quill.import('blots/block/embed');\n\nclass ImageBlot extends BlockEmbed {\n  static create(value) {\n    const imgTag = super.create();\n    imgTag.setAttribute('src', value.src);\n    imgTag.setAttribute('alt', value.alt);\n    imgTag.setAttribute('width', '100%');\n    return imgTag;\n  }\n\n  static value(node) {\n    return { src: node.getAttribute('src'), alt: node.getAttribute('alt') };\n  }\n}\n\nImageBlot.blotName = 'image';\nImageBlot.tagName = 'img';\nQuill.register(ImageBlot);\n\nclass VideoBlot extends BlockEmbed {\n  static create(value) {\n    if (value && value.src) {\n      const videoTag = super.create();\n      videoTag.setAttribute('src', value.src);\n      videoTag.setAttribute('title', value.title);\n      videoTag.setAttribute('width', '100%');\n      videoTag.setAttribute('controls', '');\n\n      return videoTag;\n    } else {\n      const iframeTag = document.createElement('iframe');\n      iframeTag.setAttribute('src', value);\n      iframeTag.setAttribute('frameborder', '0');\n      iframeTag.setAttribute('allowfullscreen', true);\n      iframeTag.setAttribute('width', '100%');\n      return iframeTag;\n    }\n  }\n\n  static value(node) {\n    if (node.getAttribute('title')) {\n      return { src: node.getAttribute('src'), alt: node.getAttribute('title') };\n    } else {\n      return node.getAttribute('src');\n    }\n    // return { src: node.getAttribute('src'), alt: node.getAttribute('title') };\n  }\n}\n\nVideoBlot.blotName = 'video';\nVideoBlot.tagName = 'video';\nQuill.register(VideoBlot);\n\nclass FileBlot extends BlockEmbed {\n  static create(value) {\n    const prefixTag = document.createElement('span');\n    prefixTag.innerText = '첨부파일 - ';\n\n    const bTag = document.createElement('b');\n    //위에 첨부파일 글자 옆에  파일 이름이 b 태그를 사용해서 나온다.\n    bTag.innerText = value;\n\n    const linkTag = document.createElement('a');\n    linkTag.setAttribute('href', value);\n    linkTag.setAttribute('target', '_blank');\n    linkTag.setAttribute('className', 'file-link-inner-post');\n    linkTag.appendChild(bTag);\n    //linkTag 이런식으로 나온다 <a href=\"btn_editPic@3x.png\" target=\"_blank\" classname=\"file-link-inner-post\"><b>btn_editPic@3x.png</b></a>\n\n    const node = super.create();\n    node.appendChild(prefixTag);\n    node.appendChild(linkTag);\n\n    return node;\n  }\n\n  static value(node) {\n    const linkTag = node.querySelector('a');\n    return linkTag.getAttribute('href');\n  }\n}\n\nFileBlot.blotName = 'file';\nFileBlot.tagName = 'p';\nFileBlot.className = 'file-inner-post';\nQuill.register(FileBlot);\n\nclass PollBlot extends BlockEmbed {\n  static create(value) {\n    const prefixTag = document.createElement('span');\n    prefixTag.innerText = '투표 - ';\n\n    const bTag = document.createElement('b');\n    bTag.innerText = value.title;\n\n    const node = super.create();\n    node.setAttribute('id', value.id);\n    node.appendChild(prefixTag);\n    node.appendChild(bTag);\n\n    return node;\n  }\n\n  static value(node) {\n    const id = node.getAttribute('id');\n    const bTag = node.querySelector('b');\n    const title = bTag.innerText;\n    return { id, title };\n  }\n}\n\nPollBlot.blotName = 'poll';\nPollBlot.tagName = 'p';\nPollBlot.className = 'poll-inner-post';\nQuill.register(PollBlot);\n\nclass QuillEditor extends React.Component {\n  bandId;\n  placeholder;\n  onEditorChange;\n  onFilesChange;\n  onPollsChange;\n  _isMounted;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      editorHtml: __ISMSIE__ ? '<p>&nbsp;</p>' : '',\n      files: [],\n    };\n\n    this.reactQuillRef = null;\n\n    this.inputOpenImageRef = React.createRef();\n    this.inputOpenVideoRef = React.createRef();\n    this.inputOpenFileRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  handleChange = (html) => {\n    console.log('html', html);\n    // https://youtu.be/BbR-QCoKngE\n    // https://www.youtube.com/embed/ZwKhufmMxko\n    // https://tv.naver.com/v/9176888\n    // renderToStaticMarkup(ReactHtmlParser(html, options));\n\n    this.setState(\n      {\n        editorHtml: html,\n      },\n      () => {\n        this.props.onEditorChange(this.state.editorHtml);\n      }\n    );\n  };\n\n  // I V F P들을  눌렀을떄 insertImage: this.imageHandler로 가서  거기서 inputOpenImageRef를 클릭 시킨다.\n  imageHandler = () => {\n    this.inputOpenImageRef.current.click();\n  };\n\n  videoHandler = () => {\n    this.inputOpenVideoRef.current.click();\n  };\n\n  fileHandler = () => {\n    this.inputOpenFileRef.current.click();\n  };\n\n  insertImage = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (\n      e.currentTarget &&\n      e.currentTarget.files &&\n      e.currentTarget.files.length > 0\n    ) {\n      const file = e.currentTarget.files[0];\n\n      let formData = new FormData();\n      const config = {\n        header: { 'content-type': 'multipart/form-data' },\n      };\n      formData.append('file', file);\n\n      axios.post('/api/blog/uploadfiles', formData, config).then((response) => {\n        if (response.data.success) {\n          const quill = this.reactQuillRef.getEditor();\n          quill.focus();\n\n          let range = quill.getSelection();\n          let position = range ? range.index : 0;\n\n          //먼저 노드 서버에다가 이미지를 넣은 다음에   여기 아래에 src에다가 그걸 넣으면 그게\n          //이미지 블롯으로 가서  크리에이트가 이미지를 형성 하며 그걸 발류에서     src 랑 alt 를 가져간후에  editorHTML에 다가 넣는다.\n          quill.insertEmbed(position, 'image', {\n            src: 'http://localhost:5000/' + response.data.url,\n            alt: response.data.fileName,\n          });\n          quill.setSelection(position + 1);\n\n          if (this._isMounted) {\n            this.setState(\n              {\n                files: [...this.state.files, file],\n              },\n              () => {\n                this.props.onFilesChange(this.state.files);\n              }\n            );\n          }\n        } else {\n          return alert('failed to upload file');\n        }\n      });\n    }\n  };\n\n  insertVideo = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (\n      e.currentTarget &&\n      e.currentTarget.files &&\n      e.currentTarget.files.length > 0\n    ) {\n      const file = e.currentTarget.files[0];\n\n      let formData = new FormData();\n      const config = {\n        header: { 'content-type': 'multipart/form-data' },\n      };\n      formData.append('file', file);\n\n      axios.post('/api/blog/uploadfiles', formData, config).then((response) => {\n        if (response.data.success) {\n          const quill = this.reactQuillRef.getEditor();\n          quill.focus();\n\n          let range = quill.getSelection();\n          let position = range ? range.index : 0;\n          quill.insertEmbed(position, 'video', {\n            src: 'http://localhost:5000/' + response.data.url,\n            title: response.data.fileName,\n          });\n          quill.setSelection(position + 1);\n\n          if (this._isMounted) {\n            this.setState(\n              {\n                files: [...this.state.files, file],\n              },\n              () => {\n                this.props.onFilesChange(this.state.files);\n              }\n            );\n          }\n        } else {\n          return alert('failed to upload file');\n        }\n      });\n    }\n  };\n\n  insertFile = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (\n      e.currentTarget &&\n      e.currentTarget.files &&\n      e.currentTarget.files.length > 0\n    ) {\n      const file = e.currentTarget.files[0];\n      console.log(file);\n\n      let formData = new FormData();\n      const config = {\n        header: { 'content-type': 'multipart/form-data' },\n      };\n      formData.append('file', file);\n\n      axios.post('/api/blog/uploadfiles', formData, config).then((response) => {\n        if (response.data.success) {\n          const quill = this.reactQuillRef.getEditor();\n          quill.focus();\n\n          let range = quill.getSelection();\n          let position = range ? range.index : 0;\n          quill.insertEmbed(position, 'file', response.data.fileName);\n          quill.setSelection(position + 1);\n\n          if (this._isMounted) {\n            this.setState(\n              {\n                files: [...this.state.files, file],\n              },\n              () => {\n                this.props.onFilesChange(this.state.files);\n              }\n            );\n          }\n        }\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <div id=\"toolbar\">\n          <select\n            className=\"ql-header\"\n            defaultValue={''}\n            onChange={(e) => e.persist()}\n          >\n            <option value=\"1\" />\n            <option value=\"2\" />\n            <option value=\"\" />\n          </select>\n          <button className=\"ql-bold\" />\n          <button className=\"ql-italic\" />\n          <button className=\"ql-underline\" />\n          <button className=\"ql-strike\" />\n          <button className=\"ql-insertImage\">I</button>\n          <button className=\"ql-insertVideo\">V</button>\n          <button className=\"ql-insertFile\">F</button>\n          <button className=\"ql-link\" />\n          <button className=\"ql-code-block\" />\n          <button className=\"ql-video\" />\n          <button className=\"ql-blockquote\" />\n          <button className=\"ql-clean\" />\n        </div>\n        <ReactQuill\n          ref={(el) => {\n            this.reactQuillRef = el;\n          }}\n          theme={'snow'}\n          onChange={this.handleChange}\n          modules={this.modules}\n          formats={this.formats}\n          value={this.state.editorHtml}\n          placeholder={this.props.placeholder}\n        />\n        <input\n          type=\"file\"\n          accept=\"image/*\"\n          ref={this.inputOpenImageRef}\n          style={{ display: 'none' }}\n          onChange={this.insertImage}\n        />\n        <input\n          type=\"file\"\n          accept=\"video/*\"\n          ref={this.inputOpenVideoRef}\n          style={{ display: 'none' }}\n          onChange={this.insertVideo}\n        />\n        <input\n          type=\"file\"\n          accept=\"*\"\n          ref={this.inputOpenFileRef}\n          style={{ display: 'none' }}\n          onChange={this.insertFile}\n        />\n      </div>\n    );\n  }\n\n  modules = {\n    // syntax: true,\n    toolbar: {\n      container: '#toolbar',\n      //id =\"toorbar\"는  그 위에 B I U S I V F P 이거 있는 곳이다.\n      handlers: {\n        insertImage: this.imageHandler,\n        insertVideo: this.videoHandler,\n        insertFile: this.fileHandler,\n        insertPoll: this.pollHandler,\n      },\n    },\n  };\n\n  formats = [\n    'header',\n    'bold',\n    'italic',\n    'underline',\n    'strike',\n    'image',\n    'video',\n    'file',\n    'link',\n    'code-block',\n    'video',\n    'blockquote',\n    'clean',\n  ];\n}\n\nexport default QuillEditor;\n"]},"metadata":{},"sourceType":"module"}